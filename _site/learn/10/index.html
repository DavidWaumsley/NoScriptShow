<!doctype html>
<html lang="en-gb" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>I’m the ultimate dark and light theme toggle switch… and so’s my wife.</title>
<script>  
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
</script> 
<link rel="icon" type="img/x-icon" href="/svg/favicon.svg">
<link rel="icon" href="/img/favicon.ico" sizes="any">
<meta name="description" content="About the accessibility considerations of adding a dark and light theme toggle switcher.">
<link rel="alternate" href="https://noscript.show/feed/feed.xml" type="application/atom+xml" title="No Script Show - Homepage -  Making Websites Simple Again.">
<link rel="stylesheet" href="/dist/7bUxiq8PSU.css">   
 
 <link rel="preload" as="image" href="https://i.ytimg.com/vi_webp/NbOtbHW4zlA/maxresdefault.webp">
 		
<meta name="robots" content="noai, noimageai">
<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://noscript.show/learn/10//">
<meta property="og:title" content="No Script Show I’m the ultimate dark and light theme toggle switch… and so’s my wife.">
<meta property="og:description" content="About the accessibility considerations of adding a dark and light theme toggle switcher.">

<meta property="og:image" content="https://i.ytimg.com/vi_webp/NbOtbHW4zlA/maxresdefault.webp">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://noscript.show/learn/10/">
<meta property="twitter:title" content="No Script Show I’m the ultimate dark and light theme toggle switch… and so’s my wife.">
<meta property="twitter:description" content="About the accessibility considerations of adding a dark and light theme toggle switcher.">

<meta property="twitter:image" content="https://i.ytimg.com/vi_webp/NbOtbHW4zlA/maxresdefault.webp">

 <link rel="preload" href="/fonts/UbuntuMono-Bold.woff2" as="font" type="font/woff2" crossorigin="">
 <link rel="preload" href="/fonts/UbuntuMono-Regular.woff2" as="font" type="font/woff2" crossorigin="">
 <meta name="generator" content="Eleventy v3.1.0">
</head>
<body id="top">
<a href="#skip" class="[ skip-link ]">Skip to main content</a>
<div class="[ top-bar ]">
<button class="[ toggle ]" data-theme-toggle="" id="theme-toggle" style="display: none" type="button" aria-label="light and dark mode switch">
<img class="theme-icon" src="/svg/moon.svg" width="25" height="25" alt="">
</button>
</div>
<header>
<a class="logo" href="/"><svg role="img" viewBox="0 0 996 562" aria-labelledby="my-title" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2">
<title id="my-title">No Script Show Logo</title>
<path d="m89.775 203.598 71.329 39.531q5.37 3.007 7.143 5.371 1.773 2.363 1.773 6.016 0 4.619-3.33 8.003-3.331 3.383-7.735 3.383-2.9 0-8.701-3.222l-106.24-59.082 106.24-59.082q5.8-3.116 8.594-3.116 4.511 0 7.842 3.33t3.33 7.95q0 3.653-1.773 6.015-1.772 2.364-7.143 5.371z" style="fill:var(--text);fill-rule:nonzero" transform="translate(-147.298 -473.212)scale(3.34662)"></path><path d="m89.775 203.598 71.329 39.531q5.37 3.007 7.143 5.371 1.773 2.363 1.773 6.016 0 4.619-3.33 8.003-3.331 3.383-7.735 3.383-2.9 0-8.701-3.222l-106.24-59.082 106.24-59.082q5.8-3.116 8.594-3.116 4.511 0 7.842 3.33t3.33 7.95q0 3.653-1.773 6.015-1.772 2.364-7.143 5.371z" style="fill:var(--text);fill-rule:nonzero" transform="matrix(-3.34662 0 0 3.34662 1142.63 -473.212)"></path><path d="M400.121 176.416c0-25.872-12.477-46.876-27.845-46.876s-27.845 21.004-27.845 46.876v354.19c0 25.871 12.477 46.876 27.845 46.876s27.845-21.005 27.845-46.876z" style="fill:var(--brand)" transform="matrix(1.08506 0 0 .64455 96.053 -19.524)"></path><path d="M400.121 195.644c0-36.484-12.477-66.104-27.845-66.104s-27.845 29.62-27.845 66.104v315.734c0 36.484 12.477 66.104 27.845 66.104s27.845-29.62 27.845-66.104z" style="fill:var(--brand)" transform="matrix(.87132 0 0 .36703 263.224 78.585)"></path><path d="M400.121 256.642c0-70.15-12.477-127.102-27.845-127.102s-27.845 56.952-27.845 127.102V450.38c0 70.15 12.477 127.102 27.845 127.102s27.845-56.952 27.845-127.102z" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 384.847 150.82)"></path><path d="M400.121 256.642c0-70.15-12.477-127.102-27.845-127.102s-27.845 56.952-27.845 127.102V450.38c0 70.15 12.477 127.102 27.845 127.102s27.845-56.952 27.845-127.102z" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 63.41 150.82)"></path><path d="M400.121 198.434c0-38.024-12.477-68.894-27.845-68.894s-27.845 30.87-27.845 68.894v310.154c0 38.023 12.477 68.894 27.845 68.894s27.845-30.871 27.845-68.894z" style="fill:var(--brand)" transform="matrix(.9081 0 0 .36703 67.663 78.585)"></path><path d="M75.623 361.143v6.72h-16.32v52.704h-7.872v-52.704h-16.32v-6.72zm10.56 59.424v-65.184l7.968-1.344v22.656q1.92-.768 4.32-1.2t4.704-.432q5.088 0 8.496 1.488t5.424 4.176 2.88 6.432.864 8.256v25.152h-7.872v-23.424q0-8.256-2.304-11.664t-8.256-3.408q-2.496 0-4.848.528t-3.408 1.008v36.96zm66.048-45.6q9.024 0 13.92 5.616t4.896 17.04v2.784h-31.872q.48 6.912 4.56 10.512t11.472 3.6q4.224 0 7.2-.672t4.512-1.44l1.056 6.72q-1.44.768-5.184 1.632t-8.448.864q-5.76 0-10.128-1.776t-7.248-4.848-4.32-7.344-1.44-9.264q0-5.952 1.824-10.368t4.8-7.296 6.72-4.32a21.2 21.2 0 0 1 7.68-1.44m10.752 19.008q0-5.664-2.976-8.976t-7.872-3.312q-2.784 0-5.04 1.056a12.7 12.7 0 0 0-3.888 2.784 13.6 13.6 0 0 0-2.592 3.936 16.4 16.4 0 0 0-1.248 4.512zm95.04 26.592a537 537 0 0 0-6.144-14.448q-2.88-6.48-5.52-12.144a307 307 0 0 0-5.232-10.704q-2.592-5.04-5.28-10.128v47.424h-7.2v-59.424h8.064q3.936 7.2 6.864 12.576a252 252 0 0 1 5.376 10.416 259 259 0 0 1 4.752 10.368 744 744 0 0 1 5.184 12.336v-45.696h7.2v59.424zm57.504-22.272q0 5.28-1.488 9.552t-4.176 7.344a18.5 18.5 0 0 1-6.432 4.752q-3.744 1.68-8.16 1.68-4.32 0-8.016-1.68a18.6 18.6 0 0 1-6.384-4.752q-2.688-3.072-4.176-7.344t-1.488-9.552 1.488-9.6 4.176-7.344a18.9 18.9 0 0 1 6.384-4.704q3.696-1.68 8.016-1.68 4.416 0 8.16 1.68a18.8 18.8 0 0 1 6.432 4.704q2.688 3.024 4.176 7.344t1.488 9.6m-8.16 0q0-7.584-3.264-11.952t-8.832-4.368q-5.472 0-8.688 4.368t-3.216 11.952q0 7.488 3.216 11.856t8.688 4.368q5.568 0 8.832-4.368t3.264-11.856m82.464 16.704q6.048 0 9.216-2.304t3.168-6.912q0-2.784-1.152-4.752t-3.072-3.456a22 22 0 0 0-4.32-2.592 83 83 0 0 0-4.896-2.064 51 51 0 0 1-5.52-2.592 23 23 0 0 1-4.704-3.36 14.3 14.3 0 0 1-3.264-4.512q-1.2-2.592-1.2-6.144 0-7.776 4.896-12.144t13.632-4.368q2.4 0 4.752.336t4.368.816 3.6 1.152 2.544 1.344l-2.496 6.624q-1.92-1.152-5.28-2.304t-7.488-1.152q-4.32 0-7.488 2.16t-3.168 6.48q0 2.496.912 4.224a9.8 9.8 0 0 0 2.496 3.024q1.584 1.296 3.696 2.352a80 80 0 0 0 4.608 2.112 103 103 0 0 1 6.672 3.072q3.024 1.536 5.184 3.648t3.36 4.992 1.2 7.008q0 7.776-5.232 11.952t-15.024 4.176q-3.168 0-5.952-.432t-4.944-1.104a46 46 0 0 1-3.792-1.344q-1.632-.672-2.496-1.248l2.4-6.528q1.92 1.056 5.664 2.448t9.12 1.392m30.24-16.608q0-6.048 1.92-10.464t5.28-7.296 7.824-4.272 9.552-1.392q3.264 0 6.48.432t6.864 1.584l-1.824 6.816q-3.168-1.152-5.808-1.488a42 42 0 0 0-5.328-.336q-3.456 0-6.528.912t-5.328 2.88-3.6 5.088-1.344 7.536q0 4.224 1.248 7.248t3.504 4.992 5.424 2.928 7.008.96q3.072 0 5.904-.336t6.192-1.488l1.152 6.624a34.5 34.5 0 0 1-6.816 1.776q-3.456.528-7.488.528-5.376 0-9.84-1.488t-7.68-4.368-4.992-7.248-1.776-10.128m53.568 22.176v-42.144q9.792-3.36 19.776-3.36 3.072 0 5.856.24t6.144 1.008l-1.44 7.008q-3.072-.864-5.424-1.104t-5.136-.24q-5.856 0-11.904 1.632v36.96zm57.792-51.456q-2.496 0-4.32-1.728t-1.824-4.704 1.824-4.704 4.32-1.728q2.592 0 4.368 1.728t1.776 4.704-1.776 4.704-4.368 1.728m-2.016 13.536h-12.864v-6.624h20.736v27.36q0 6.624 1.824 8.88t5.472 2.256q2.784 0 5.136-.672t3.696-1.44l1.152 6.72a25 25 0 0 1-1.632.72q-1.056.432-2.448.816t-3.072.672-3.504.288q-4.224 0-7.008-1.152t-4.464-3.456-2.352-5.712-.672-7.92zm65.952 15.744q0-7.776-3.648-12.048t-9.504-4.272q-3.264 0-5.136.288t-2.928.672v28.128q1.344 1.248 3.936 2.304a14.1 14.1 0 0 0 5.376 1.056q3.168 0 5.424-1.248a10.5 10.5 0 0 0 3.696-3.408q1.44-2.16 2.112-5.088t.672-6.384m8.16 0q0 5.088-1.296 9.36t-3.744 7.344a17.2 17.2 0 0 1-6 4.8q-3.552 1.728-8.064 1.728-3.552 0-6.24-.864t-4.032-1.92v17.568h-7.968v-59.04q2.592-.768 6.672-1.536t9.36-.768q4.8 0 8.736 1.632t6.72 4.656 4.32 7.344 1.536 9.696m27.168-22.368h18.816v6.624h-18.816v20.736q0 3.36.48 5.472t1.584 3.408 2.832 1.776 4.224.48q3.456 0 5.568-.576a22 22 0 0 0 4.032-1.536l1.152 6.72q-1.344.576-4.272 1.536t-7.248.96q-4.992 0-8.16-1.152t-4.944-3.456-2.448-5.712-.672-7.92v-20.736h-9.408v-6.624h9.408v-12.48l7.872-1.344zm95.136 38.976q6.048 0 9.216-2.304t3.168-6.912q0-2.784-1.152-4.752t-3.072-3.456a22 22 0 0 0-4.32-2.592 83 83 0 0 0-4.896-2.064 51 51 0 0 1-5.52-2.592 23 23 0 0 1-4.704-3.36 14.3 14.3 0 0 1-3.264-4.512q-1.2-2.592-1.2-6.144 0-7.776 4.896-12.144t13.632-4.368q2.4 0 4.752.336t4.368.816 3.6 1.152 2.544 1.344l-2.496 6.624q-1.92-1.152-5.28-2.304t-7.488-1.152q-4.32 0-7.488 2.16t-3.168 6.48q0 2.496.912 4.224a9.8 9.8 0 0 0 2.496 3.024q1.584 1.296 3.696 2.352a80 80 0 0 0 4.608 2.112 103 103 0 0 1 6.672 3.072q3.024 1.536 5.184 3.648t3.36 4.992 1.2 7.008q0 7.776-5.232 11.952t-15.024 4.176q-3.168 0-5.952-.432t-4.944-1.104a46 46 0 0 1-3.792-1.344q-1.632-.672-2.496-1.248l2.4-6.528q1.92 1.056 5.664 2.448t9.12 1.392m32.352 5.568v-65.184l7.968-1.344v22.656q1.92-.768 4.32-1.2t4.704-.432q5.088 0 8.496 1.488t5.424 4.176 2.88 6.432.864 8.256v25.152h-7.872v-23.424q0-8.256-2.304-11.664t-8.256-3.408q-2.496 0-4.848.528t-3.408 1.008v36.96zm85.344-22.272q0 5.28-1.488 9.552t-4.176 7.344a18.5 18.5 0 0 1-6.432 4.752q-3.744 1.68-8.16 1.68-4.32 0-8.016-1.68a18.6 18.6 0 0 1-6.384-4.752q-2.688-3.072-4.176-7.344t-1.488-9.552 1.488-9.6 4.176-7.344a18.9 18.9 0 0 1 6.384-4.704q3.696-1.68 8.016-1.68 4.416 0 8.16 1.68a18.8 18.8 0 0 1 6.432 4.704q2.688 3.024 4.176 7.344t1.488 9.6m-8.16 0q0-7.584-3.264-11.952t-8.832-4.368q-5.472 0-8.688 4.368t-3.216 11.952q0 7.488 3.216 11.856t8.688 4.368q5.568 0 8.832-4.368t3.264-11.856m44.928 22.272q-1.44-3.264-2.496-5.952a370 370 0 0 1-2.064-5.376 220 220 0 0 1-2.016-5.616 547 547 0 0 0-2.352-6.672q-1.344 3.744-2.4 6.672a474 474 0 0 1-2.064 5.616 187 187 0 0 1-2.112 5.376 253 253 0 0 1-2.544 5.952h-5.952a333 333 0 0 1-4.464-23.376q-1.776-11.568-2.64-21.168h7.488q.288 3.744.624 7.344t.816 7.536 1.104 8.544 1.392 10.368q1.536-3.84 2.592-6.72a196 196 0 0 0 1.92-5.472 205 205 0 0 0 1.68-5.28 387 387 0 0 0 1.776-6.048h5.952l1.728 6.048a127 127 0 0 0 1.632 5.28l1.824 5.472q.96 2.88 2.4 6.624.864-5.28 1.536-9.792t1.152-8.496.864-7.728.672-7.68h7.2q-.48 4.8-1.152 10.272a264 264 0 0 1-1.632 11.232q-.96 5.76-2.112 11.664a369 369 0 0 1-2.4 11.376z" style="fill:var(--text);fill-rule:nonzero" transform="translate(-38.03 56.499)scale(1.15722)"></path></svg>
</a>
<nav aria-label="Main">
<ul class="nav"><li class="nav-item"><a href="/">Home</a></li><li class="nav-item"><a href="/build/">Build</a></li><li class="nav-item"><a href="/chat/">Chat</a></li><li class="nav-item"><a href="/learn/" aria-current="true" aria-label="Currently viewing a single post under Learn.">Learn</a></li><li class="[ nav-item ][ pill ]"><a href="#more-navigation" aria-label="More navigation links in the footer.">More <span aria-hidden="true">▼</span></a></li>
</ul>
</nav>
</header>
<main class="[ page-layout ] [ flow ]" id="skip">			


<div class="[ popout ]">

<h1 class=" [ visually-hidden ]" id="i-m-the-ultimate-dark-and-light-theme-toggle-switch-and-so-s-my-wife">I’m the ultimate dark and light theme toggle switch… and so’s my wife.</h1>
<div class="[ popout ]">
<lite-youtube videoid="NbOtbHW4zlA" playlabel="Play: I’m the ultimate dark and light theme toggle switch… and so’s my wife." style="background-image: url('https://i.ytimg.com/vi_webp/NbOtbHW4zlA/maxresdefault.webp');">
  <a href="https://youtube.com/watch?v=NbOtbHW4zlA" class="lyt-playbtn" title="Play Video">  
  <span class="lyt-visually-hidden">Play Video: I’m the ultimate dark and light theme toggle switch… and so’s my wife.</span>
  </a>
</lite-youtube>


<div class="right-me">
<ul class="post-metadata">
	<li><time datetime="2024-05-23">23 May 2024</time></li>
	<li><a href="/tags/learn/" class="post-tag">learn</a></li>
</ul>
</div>
<article>
<heading-anchors>
<div class="[ flow ][ page-layout ]">
<h2 id="toggles-should-be-a-browser-feature">Toggles should be a browser feature</h2>
<p>As part of designing the No Script Show's website I talked <a href="/learn/9">before</a> about light and dark themes and briefly on adding a toggle switch.</p>
<p>Here I'm looking more closely at the implementation and sharing some alternative code.</p>
<p>I skimmed over this topic before because it was getting far away from what our show is about (i.e. how easy it's becoming to make effective sites with only modern HTML and CSS).</p>
<p>Everything I encountered doing this led away from this and to me strongly agreeing with Bramus Van Damme (a Developer Relations Engineer at Google) that these per-site toggle switches <a href="https://www.bram.us/2022/05/25/dark-mode-toggles-should-be-a-browser-feature/">should be a browser feature.</a> This was something <a href="https://www.xda-developers.com/apple-adding-per-website-dark-mode-safari/">rumoured</a> to be coming to Safari a few years back around the time Bramus was raising this.</p>
<p>Ideally I would like to see <a href="https://www.bram.us/2024/04/13/what-if-you-had-real-control-over-light-mode-dark-mode-on-a-per-site-basis/">Bramus and Luke Warlow's &quot;proof of concept&quot;</a> Chrome extension getting more attention to show browser vendors that the demand is there.</p>
<p>If we look at how complex it can become for non programmers to implement a dark/light switch properly I think it makes their case.</p>
<p>Modern CSS makes it easy for us to create dark and light themes with CSS color-scheme and the &quot;prefers-color-scheme&quot; media query to honour a users system preference. But in giving us this it creates the demand to offer this option via a toggle on our own individual sites.</p>
<p>Doing this creates a dependency back to custom javaScript and we have to either duplicate our dark and light theme code or in the case of javaScript failure have to ignore the user's system preference.</p>
<p>We have to compromise when working with dark and light images (which I will cover next time on this mini-site ) and we have additional accessibility considerations which I am focussing on here.</p>
<h2 id="the-ultimate-theme-toggle">The Ultimate Theme Toggle</h2>
<p>The code I am using here comes from Salma Alam-Naylor's (slightly tongue in cheek) <a href="https://whitep4nth3r.com/blog/best-light-dark-mode-theme-toggle-javascript/">The Ultimate Theme Toggle™️</a> . Equally I could have gone with Adam Argyle's <a href="https://web.dev/patterns/theming/theme-switch">Dark and Light Theme Switch</a> shared on Google's web.dev and used on his <a href="https://nerdy.dev/">personal site too.</a></p>
<p>I've made some additions to Salma's code which I have included in the article that goes with the video and we explain them here.</p>
<p>I've also been looking at two other dark and light switches from to two other developers I admire: [Una Kravets](https://una.im/ target=) personal site and CSS in real life by <a href="https://css-irl.info/">Michelle Barker</a>.</p>
<p>All of the above are similar to what I shared before. They all use a HTML button for the switch, they all try to honour the user system preference first and use the browser's local storage to hold changes in preference.</p>
<p>I'm not sure why all chose a button over a checkbox input used on some other solutions. I doubted the semantics of my own button choice. It's probably irrelevant, but even here we have division on how to do a two option switch.</p>
<p>Michelle Barker's CSS in real life site is closest to what I shared before in that it has a default light theme and the javaScript adds a class selectors for the dark theme styles. She goes one step further in adding duplicate CSS in a “prefers-color-scheme” media query so it still works if javaScript fails or is turned off.</p>
<p><strong>Note:</strong> Even with Bramus and Luke's chrome extension checking that light and dark themes are working properly in all situations is a pain. We have to keep clearing local storage</p>
<p><img src="/img/local-storage.webp" alt="Screenshot of where the local storage is on Chromium browsers. That is the appications tab and local storage."></p>
<p>The other three are different in that they use data attributes: [data-theme=&quot;light&quot;] and [data-theme=&quot;dark&quot;] instead of a CSS class selector.</p>
<p>As browsers might support a media query for “no preference” I can see the sense in grouping themes like this rather than having a default and an alternative, but, of course, what's best depends on the situation.</p>
<h2 id="adding-icons">Adding icons</h2>
<p>Salma gives us all the code we need on Codepen but the text version without icons. On her own site she adds icons as decorative background images.</p>
<p>This is not something I will say often, but I went with the Chat GPT suggestions to add these icons to the button's HTML via the javascript.</p>
<p>This might be OTT as Salma Javascript provides a nice dynamic aria label that explains the button.</p>
<p>My addition allows the screen reader users to hover over the icons and hear what they are and what they do, via the icon alt tags (which are also dynamic)</p>
<p>The other 3 sites mentioned have SVG's hard coded into the buttons so there are no alt tags there.</p>
<p>If they wanted the icons announced they could have added an aria labelledby that reference to a title added to the SVG. They have not, which does leaves me thinking I have over complicated this</p>
<p>If you want to use my version so you don't need to add the icons via CSS you could remove them from screen readers by adding aria-hidden=&quot;true&quot; to the icons (only shown in the video so I don't forget)</p>
<h2 id="toggles-suck">Toggles suck!</h2>
<p>I'm not going to get into UI here. There's a lot of articles about the usability of toggle switches. This one called toggles suck seems to do a good job of bringing together what others have said.</p>
<p>I'd rather see the best people in accessibility working with browser vendors to create a convention we all could understand and use.</p>
<p>Nathan's impression was that side to side toggling had become the norm. He could be right, certainly there was a run off fancy Codepen toggles like that, but here there are all single icons ( Adam and Una both have cool SVG animation).</p>
<p>We'll go with the least attention grabbing and space saving approach as there are probably better things for the visitor to get focussed on.</p>
<h2 id="no-javascript">No javascript</h2>
<p>With Salma's code we set a fallback theme in the HTML if javaScript fails: <code>&lt;html lang=&quot;en&quot; data-theme=&quot;light&quot;&gt;</code></p>
<p>The user device preference is not honoured (unless that matches what we have set.)</p>
<p>On the personal sites for the others they have duplicated the CSS That is, they have:</p>
<pre class="language-html" tabindex="0"><code class="language-html"> @media (prefers-color-scheme: light) {
/* All the light rules*/
}</code></pre>
<p>AND</p>
<pre class="language-html" tabindex="0"><code class="language-html">[data-theme="light"]{
/* All the light rules again*/
} </code></pre>
<p>If we want the same we need to add some additional JS.</p>
<div class="popout">
<pre class="language-js" tabindex="0"><code class="language-js"> <span class="token comment">// Inline script to set the initial theme </span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> localStorageTheme <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'theme'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> systemPrefersDark <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">;</span>
 <span class="token keyword">const</span> theme <span class="token operator">=</span> localStorageTheme <span class="token operator">?</span> localStorageTheme <span class="token operator">:</span> <span class="token punctuation">(</span>systemPrefersDark <span class="token operator">?</span> <span class="token string">'dark'</span> <span class="token operator">:</span> <span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-theme'</span><span class="token punctuation">,</span> theme<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
<p>I got Chat GPT to do this. It's probably best to let the browser read this first. I have to put this in the head. Also I have to place the prefers-color-scheme media queries first in the CSS.</p>
<p>We will probably stick with Salma's approach. The CSS duplication seems fine for a few colours, but if you get into swapping icons and images based on dark and light preference the code and maintenance starts adding up.</p>
<h2 id="no-js-no-toggle">No JS - no toggle</h2>
<p>I have altered Salma's code to hide the toggle when there is no JS. The button has an inline style of <code>display:none;</code>which is changed to <code>display:block;</code> by the javaScript. This removes it from the accessibility tree for screen readers too.</p>
<h2 id="focus-state">Focus state</h2>
<p>In an earlier video I mentioned the new focus-visible pseudo class to let the browser remove ugly focus rings when a sighted user does not need this visual clue. This is generally one to go for, but here we have an exception as the button here is not being styled in the regular way and we need people to tab to it and change it with the keyboard. I added it this way:</p>
<pre class="language-css" tabindex="0"><code class="language-css"> <span class="token selector">:focus-visible:not(toggle)</span><span class="token punctuation">{</span>             
    <span class="token comment">/* Styles */</span>
 <span class="token punctuation">}</span></code></pre>
<h2 id="toggle-animation">Toggle Animation</h2>
<p>We don't have much animation here, but still I have added <code>@media (prefers-reduced-motion: no-preference)</code>to this so it only shows for people who do not set this to reduced or no motion.</p>
<h2 id="aria-live">Aria Live</h2>
<p>Finally noticed on Adam Argyles's personal site and also Una Kravets they had added <code>aria-live=&quot;polite&quot;</code>. It's not included in Adams web dev article.</p>
<p>Aria live gives screen readers an update of regional changes they might not otherwise be aware of because the reader is focused elsewhere.</p>
<p>For example if a checkout form has an input to add something that will alter the price positioned elsewhere in the region the changed price will be announced (politely) when the input is checked. It's likely that sighted users would be looking at price when clicking elsewhere and this brings this ability to non sighted users.</p>
<p>After trying it with the NVDA (an open source screen reader that is also the most used) I felt adding this might be annoying or even more confusing in this situation.</p>
<p>If I enter in light mode without aria live the screen reader announces &quot;switch to dark theme button&quot; if I enter or click it says &quot;switch to light theme&quot;. I Imagine most would understand what's happening on the first change.</p>
<p>Also If hover over the icon it says it is a sun icon that switches to a dark theme.</p>
<p>If I add aria live <a href="https://www.nvaccess.org/">NVDA</a> says switch to light theme 3 times and automatically reads the new alt image tag too. It could be my ignorance using NVDA, but I did not like how it worked with my solution.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Trying to get a toggle to work well pushed me beyond my skill set and toward feeling less certain in what I am doing. I think that alone backs up Bramus’s argument for browsers to do this.</p>
<p>As dark and light themes become increasingly becoming a standard I’d rather be focussing on doing better designs with the same CSS as everyone rather than going it alone with my own custom JS hacks.</p>
<p>I feel more sure of this after seeing a couple of these switches made for the massive WordPress audience that have not taken anything the care the people I feature here have. Previously, I would have excitedly jumped on these taking it for granted that I was aiding accessibility</p>
<p>Whilst I don't think this is as bad as the way things went with the accessibility overlays market (which I am sure was well intended originally) but, I think some early standards might avoid a similar thing happening. Rant over!</p>
<h2 id="the-code"><a href="https://codepen.io/David-Waumsley-the-solid/pen/ExzyyoK">The code</a></h2>
<p>See the Pen <a href="https://codepen.io/David-Waumsley-the-solid/pen/ExzyyoK">Light and dark theme toggle</a> by David Waumsley on CodePen.</p>

</div>
</heading-anchors></article>
<div class="popout">

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/11/">What’s new in web images</a></li><li class="links-nextprev-next">Next →<br><a href="/learn/11/">Finally, a delightful free accessibility tool. Silktide</a></li>
</ul>
</div>			
</div></div></main>	
  <footer>
<h2 class="[ angle ]" id="links">Links</h2>  
<div class="[ footer-wrapper ]">
<nav class="[ footer-links ][ fa1 ]">
<h3 id="audio-only-episodes">Audio only episodes</h3>

<ul> 
<li><a href="https://podcast.apple.com/us/podcast/no-script-show/id1721164461">Apple Podcast</a></li>  
<li><a href="https://open.spotify.com/show/3Ki7eEhpGheFpmJOzZ0WEi">Spotify</a></li> 
<li><a href="https://castbox.fm/channel/id5744674?utm_campaign=ex_share_ch&utm_medium=exlink&country=us">Castbox.fm</a></li>
<li><a href="https://play.pocketcasts.com/podcasts/5a979010-7be1-013c-dc7c-0e76ec147af9">Pocket Casts</a></li>  
<li><a href="https://www.podcastrepublic.net/podcast/1721164461">Podcast Republic</a></li>
</ul>
</nav>

<nav class="[ footer-links ][ fa2 ]" id="more-navigation" aria-label="More on this site">
<h3 id="more-navigation-2">More navigation</h3>
<ul>
<li><a href="/about/">About</a></li>
<li><a href="/contact/">Contact</a></li>        
<li><a href="/blog/">Archive</a></li>
<li><a href="https://noscript.show/feed/feed.xml">RSS Feed</a></li>
<li class="external-link"><a href="https://intrinsicframework.here24.co/">Intrinsic Framework <svg aria-hidden="true" fill="var(--text)" width="18px" height="18px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M19,14 L19,19 C19,20.1045695 18.1045695,21 17,21 L5,21 C3.8954305,21 3,20.1045695 3,19 L3,7 C3,5.8954305 3.8954305,5 5,5 L10,5 L10,7 L5,7 L5,19 L17,19 L17,14 L19,14 Z M18.9971001,6.41421356 L11.7042068,13.7071068 L10.2899933,12.2928932 L17.5828865,5 L12.9971001,5 L12.9971001,3 L20.9971001,3 L20.9971001,11 L18.9971001,11 L18.9971001,6.41421356 Z"></path>
</svg></a>
</li>
</ul>
</nav>
</div>
<div class="back-to-top">
<a class="btn" href="#top" aria-label="back to top"> Back to top <span aria-hidden="true">▲</span></a>
</div>
<div class="[ fa3 ]">
<small>© Copyright since 2023 | <a href="/privacy/"> Privacy </a>  | <a href="/accessibility-statement/"> Accessibility</a>  | <em>Built with <a href="https://www.11ty.dev/">Eleventy v3.1.0</a></em>
</small>

 </div>
</footer>
		<!-- This page `/learn/10/` was built on 2025-07-03T16:29:12.065Z -->
		<script type="module" src="/dist/1D9yP2m7sP.js"></script>		
</body>
</html>