<!doctype html>
<html lang="en-gb" data-theme="light"><head>
 <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adding a light and dark mode with a toggle</title><link rel="stylesheet" href="/dist/noj42O-_io.css"><link rel="preload" as="image" href="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp"> 
<link rel="preload" href="/fonts/UbuntuMono-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="/fonts/UbuntuMono-Regular.woff2" as="font" type="font/woff2" crossorigin=""><meta name="robots" content="noai, noimageai">
<link rel="canonical" href="https://noscript.show/learn/9/"><link rel="icon" type="img/x-icon" href="/svg/favicon.svg">
<link rel="icon" href="/img/favicon.ico" sizes="any">
<link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
<meta name="description" content="About adding a light or dark toggle to website and how this is not perfect but might become a standard.">
<link rel="alternate" href="https://noscript.show/feed/feed.xml" type="application/atom+xml" title="No Script Show - Homepage -  Making Websites Simple Again."><meta property="og:type" content="website">
<meta property="og:url" content="https://noscript.show/learn/9/">
<meta property="og:title" content="No Script Show Adding a light and dark mode with a toggle">
<meta property="og:description" content="About adding a light or dark toggle to website and how this is not perfect but might become a standard."><meta property="og:image" content="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp"><meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://noscript.show/learn/9/">
<meta property="twitter:title" content="No Script Show Adding a light and dark mode with a toggle">
<meta property="twitter:description" content="About adding a light or dark toggle to website and how this is not perfect but might become a standard."><meta property="twitter:image" content="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp">
<meta name="generator" content="Eleventy v3.1.0">   
</head><body id="top">
<a href="#skip" class="[ skip-link ]">Skip to main content</a>
<div class="[ top-bar ]">
<button class="[ toggle ]" data-theme-toggle="" id="theme-toggle" style="display: none" type="button" aria-label="light and dark mode switch">
<img class="theme-icon" src="/svg/moon.svg" width="25" height="25" alt="">
</button>
</div><header><a class="logo" href="/"><svg role="img" viewBox="0 0 996 562" aria-labelledby="my-title" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2">
<title id="my-title">No Script Show Logo</title>
<path d="m89.775 203.598 71.329 39.531q5.37 3.007 7.143 5.371 1.773 2.363 1.773 6.016 0 4.619-3.33 8.003-3.331 3.383-7.735 3.383-2.9 0-8.701-3.222l-106.24-59.082 106.24-59.082q5.8-3.116 8.594-3.116 4.511 0 7.842 3.33t3.33 7.95q0 3.653-1.773 6.015-1.772 2.364-7.143 5.371z" style="fill:var(--text);fill-rule:nonzero" transform="translate(-147.298 -473.212)scale(3.34662)"></path><path d="m89.775 203.598 71.329 39.531q5.37 3.007 7.143 5.371 1.773 2.363 1.773 6.016 0 4.619-3.33 8.003-3.331 3.383-7.735 3.383-2.9 0-8.701-3.222l-106.24-59.082 106.24-59.082q5.8-3.116 8.594-3.116 4.511 0 7.842 3.33t3.33 7.95q0 3.653-1.773 6.015-1.772 2.364-7.143 5.371z" style="fill:var(--text);fill-rule:nonzero" transform="matrix(-3.34662 0 0 3.34662 1142.63 -473.212)"></path><path d="M400.121 176.416c0-25.872-12.477-46.876-27.845-46.876s-27.845 21.004-27.845 46.876v354.19c0 25.871 12.477 46.876 27.845 46.876s27.845-21.005 27.845-46.876z" style="fill:var(--brand)" transform="matrix(1.08506 0 0 .64455 96.053 -19.524)"></path><path d="M400.121 195.644c0-36.484-12.477-66.104-27.845-66.104s-27.845 29.62-27.845 66.104v315.734c0 36.484 12.477 66.104 27.845 66.104s27.845-29.62 27.845-66.104z" style="fill:var(--brand)" transform="matrix(.87132 0 0 .36703 263.224 78.585)"></path><path d="M400.121 256.642c0-70.15-12.477-127.102-27.845-127.102s-27.845 56.952-27.845 127.102V450.38c0 70.15 12.477 127.102 27.845 127.102s27.845-56.952 27.845-127.102z" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 384.847 150.82)"></path><path d="M400.121 256.642c0-70.15-12.477-127.102-27.845-127.102s-27.845 56.952-27.845 127.102V450.38c0 70.15 12.477 127.102 27.845 127.102s27.845-56.952 27.845-127.102z" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 63.41 150.82)"></path><path d="M400.121 198.434c0-38.024-12.477-68.894-27.845-68.894s-27.845 30.87-27.845 68.894v310.154c0 38.023 12.477 68.894 27.845 68.894s27.845-30.871 27.845-68.894z" style="fill:var(--brand)" transform="matrix(.9081 0 0 .36703 67.663 78.585)"></path><path d="M75.623 361.143v6.72h-16.32v52.704h-7.872v-52.704h-16.32v-6.72zm10.56 59.424v-65.184l7.968-1.344v22.656q1.92-.768 4.32-1.2t4.704-.432q5.088 0 8.496 1.488t5.424 4.176 2.88 6.432.864 8.256v25.152h-7.872v-23.424q0-8.256-2.304-11.664t-8.256-3.408q-2.496 0-4.848.528t-3.408 1.008v36.96zm66.048-45.6q9.024 0 13.92 5.616t4.896 17.04v2.784h-31.872q.48 6.912 4.56 10.512t11.472 3.6q4.224 0 7.2-.672t4.512-1.44l1.056 6.72q-1.44.768-5.184 1.632t-8.448.864q-5.76 0-10.128-1.776t-7.248-4.848-4.32-7.344-1.44-9.264q0-5.952 1.824-10.368t4.8-7.296 6.72-4.32a21.2 21.2 0 0 1 7.68-1.44m10.752 19.008q0-5.664-2.976-8.976t-7.872-3.312q-2.784 0-5.04 1.056a12.7 12.7 0 0 0-3.888 2.784 13.6 13.6 0 0 0-2.592 3.936 16.4 16.4 0 0 0-1.248 4.512zm95.04 26.592a537 537 0 0 0-6.144-14.448q-2.88-6.48-5.52-12.144a307 307 0 0 0-5.232-10.704q-2.592-5.04-5.28-10.128v47.424h-7.2v-59.424h8.064q3.936 7.2 6.864 12.576a252 252 0 0 1 5.376 10.416 259 259 0 0 1 4.752 10.368 744 744 0 0 1 5.184 12.336v-45.696h7.2v59.424zm57.504-22.272q0 5.28-1.488 9.552t-4.176 7.344a18.5 18.5 0 0 1-6.432 4.752q-3.744 1.68-8.16 1.68-4.32 0-8.016-1.68a18.6 18.6 0 0 1-6.384-4.752q-2.688-3.072-4.176-7.344t-1.488-9.552 1.488-9.6 4.176-7.344a18.9 18.9 0 0 1 6.384-4.704q3.696-1.68 8.016-1.68 4.416 0 8.16 1.68a18.8 18.8 0 0 1 6.432 4.704q2.688 3.024 4.176 7.344t1.488 9.6m-8.16 0q0-7.584-3.264-11.952t-8.832-4.368q-5.472 0-8.688 4.368t-3.216 11.952q0 7.488 3.216 11.856t8.688 4.368q5.568 0 8.832-4.368t3.264-11.856m82.464 16.704q6.048 0 9.216-2.304t3.168-6.912q0-2.784-1.152-4.752t-3.072-3.456a22 22 0 0 0-4.32-2.592 83 83 0 0 0-4.896-2.064 51 51 0 0 1-5.52-2.592 23 23 0 0 1-4.704-3.36 14.3 14.3 0 0 1-3.264-4.512q-1.2-2.592-1.2-6.144 0-7.776 4.896-12.144t13.632-4.368q2.4 0 4.752.336t4.368.816 3.6 1.152 2.544 1.344l-2.496 6.624q-1.92-1.152-5.28-2.304t-7.488-1.152q-4.32 0-7.488 2.16t-3.168 6.48q0 2.496.912 4.224a9.8 9.8 0 0 0 2.496 3.024q1.584 1.296 3.696 2.352a80 80 0 0 0 4.608 2.112 103 103 0 0 1 6.672 3.072q3.024 1.536 5.184 3.648t3.36 4.992 1.2 7.008q0 7.776-5.232 11.952t-15.024 4.176q-3.168 0-5.952-.432t-4.944-1.104a46 46 0 0 1-3.792-1.344q-1.632-.672-2.496-1.248l2.4-6.528q1.92 1.056 5.664 2.448t9.12 1.392m30.24-16.608q0-6.048 1.92-10.464t5.28-7.296 7.824-4.272 9.552-1.392q3.264 0 6.48.432t6.864 1.584l-1.824 6.816q-3.168-1.152-5.808-1.488a42 42 0 0 0-5.328-.336q-3.456 0-6.528.912t-5.328 2.88-3.6 5.088-1.344 7.536q0 4.224 1.248 7.248t3.504 4.992 5.424 2.928 7.008.96q3.072 0 5.904-.336t6.192-1.488l1.152 6.624a34.5 34.5 0 0 1-6.816 1.776q-3.456.528-7.488.528-5.376 0-9.84-1.488t-7.68-4.368-4.992-7.248-1.776-10.128m53.568 22.176v-42.144q9.792-3.36 19.776-3.36 3.072 0 5.856.24t6.144 1.008l-1.44 7.008q-3.072-.864-5.424-1.104t-5.136-.24q-5.856 0-11.904 1.632v36.96zm57.792-51.456q-2.496 0-4.32-1.728t-1.824-4.704 1.824-4.704 4.32-1.728q2.592 0 4.368 1.728t1.776 4.704-1.776 4.704-4.368 1.728m-2.016 13.536h-12.864v-6.624h20.736v27.36q0 6.624 1.824 8.88t5.472 2.256q2.784 0 5.136-.672t3.696-1.44l1.152 6.72a25 25 0 0 1-1.632.72q-1.056.432-2.448.816t-3.072.672-3.504.288q-4.224 0-7.008-1.152t-4.464-3.456-2.352-5.712-.672-7.92zm65.952 15.744q0-7.776-3.648-12.048t-9.504-4.272q-3.264 0-5.136.288t-2.928.672v28.128q1.344 1.248 3.936 2.304a14.1 14.1 0 0 0 5.376 1.056q3.168 0 5.424-1.248a10.5 10.5 0 0 0 3.696-3.408q1.44-2.16 2.112-5.088t.672-6.384m8.16 0q0 5.088-1.296 9.36t-3.744 7.344a17.2 17.2 0 0 1-6 4.8q-3.552 1.728-8.064 1.728-3.552 0-6.24-.864t-4.032-1.92v17.568h-7.968v-59.04q2.592-.768 6.672-1.536t9.36-.768q4.8 0 8.736 1.632t6.72 4.656 4.32 7.344 1.536 9.696m27.168-22.368h18.816v6.624h-18.816v20.736q0 3.36.48 5.472t1.584 3.408 2.832 1.776 4.224.48q3.456 0 5.568-.576a22 22 0 0 0 4.032-1.536l1.152 6.72q-1.344.576-4.272 1.536t-7.248.96q-4.992 0-8.16-1.152t-4.944-3.456-2.448-5.712-.672-7.92v-20.736h-9.408v-6.624h9.408v-12.48l7.872-1.344zm95.136 38.976q6.048 0 9.216-2.304t3.168-6.912q0-2.784-1.152-4.752t-3.072-3.456a22 22 0 0 0-4.32-2.592 83 83 0 0 0-4.896-2.064 51 51 0 0 1-5.52-2.592 23 23 0 0 1-4.704-3.36 14.3 14.3 0 0 1-3.264-4.512q-1.2-2.592-1.2-6.144 0-7.776 4.896-12.144t13.632-4.368q2.4 0 4.752.336t4.368.816 3.6 1.152 2.544 1.344l-2.496 6.624q-1.92-1.152-5.28-2.304t-7.488-1.152q-4.32 0-7.488 2.16t-3.168 6.48q0 2.496.912 4.224a9.8 9.8 0 0 0 2.496 3.024q1.584 1.296 3.696 2.352a80 80 0 0 0 4.608 2.112 103 103 0 0 1 6.672 3.072q3.024 1.536 5.184 3.648t3.36 4.992 1.2 7.008q0 7.776-5.232 11.952t-15.024 4.176q-3.168 0-5.952-.432t-4.944-1.104a46 46 0 0 1-3.792-1.344q-1.632-.672-2.496-1.248l2.4-6.528q1.92 1.056 5.664 2.448t9.12 1.392m32.352 5.568v-65.184l7.968-1.344v22.656q1.92-.768 4.32-1.2t4.704-.432q5.088 0 8.496 1.488t5.424 4.176 2.88 6.432.864 8.256v25.152h-7.872v-23.424q0-8.256-2.304-11.664t-8.256-3.408q-2.496 0-4.848.528t-3.408 1.008v36.96zm85.344-22.272q0 5.28-1.488 9.552t-4.176 7.344a18.5 18.5 0 0 1-6.432 4.752q-3.744 1.68-8.16 1.68-4.32 0-8.016-1.68a18.6 18.6 0 0 1-6.384-4.752q-2.688-3.072-4.176-7.344t-1.488-9.552 1.488-9.6 4.176-7.344a18.9 18.9 0 0 1 6.384-4.704q3.696-1.68 8.016-1.68 4.416 0 8.16 1.68a18.8 18.8 0 0 1 6.432 4.704q2.688 3.024 4.176 7.344t1.488 9.6m-8.16 0q0-7.584-3.264-11.952t-8.832-4.368q-5.472 0-8.688 4.368t-3.216 11.952q0 7.488 3.216 11.856t8.688 4.368q5.568 0 8.832-4.368t3.264-11.856m44.928 22.272q-1.44-3.264-2.496-5.952a370 370 0 0 1-2.064-5.376 220 220 0 0 1-2.016-5.616 547 547 0 0 0-2.352-6.672q-1.344 3.744-2.4 6.672a474 474 0 0 1-2.064 5.616 187 187 0 0 1-2.112 5.376 253 253 0 0 1-2.544 5.952h-5.952a333 333 0 0 1-4.464-23.376q-1.776-11.568-2.64-21.168h7.488q.288 3.744.624 7.344t.816 7.536 1.104 8.544 1.392 10.368q1.536-3.84 2.592-6.72a196 196 0 0 0 1.92-5.472 205 205 0 0 0 1.68-5.28 387 387 0 0 0 1.776-6.048h5.952l1.728 6.048a127 127 0 0 0 1.632 5.28l1.824 5.472q.96 2.88 2.4 6.624.864-5.28 1.536-9.792t1.152-8.496.864-7.728.672-7.68h7.2q-.48 4.8-1.152 10.272a264 264 0 0 1-1.632 11.232q-.96 5.76-2.112 11.664a369 369 0 0 1-2.4 11.376z" style="fill:var(--text);fill-rule:nonzero" transform="translate(-38.03 56.499)scale(1.15722)"></path></svg>
</a><nav aria-label="Main">
<ul class="nav"><li class="nav-item"><a href="/">Home</a></li><li class="nav-item"><a href="/chat/">Chat</a></li><li class="nav-item"><a href="/build/">Build</a></li><li class="nav-item"><a href="/learn/" aria-current="true" aria-label="Currently viewing a single post under Learn.">Learn</a></li><li class="[ nav-item ][ pill ]"><a href="#more-navigation" aria-label="More navigation links in the footer.">More <span aria-hidden="true">▼</span></a></li>
</ul>
</nav>
</header><main class="[ page-layout ] [ flow ]" id="skip">		
<div class="[ popout ]">
<h1 class=" [ visually-hidden ]" id="adding-a-light-and-dark-mode-with-a-toggle">Adding a light and dark mode with a toggle</h1>
<div class="[ popout ]">
<lite-youtube videoid="eZTB4rH7Wh8" playlabel="Play: Adding a light and dark mode with a toggle" style="background-image: url('https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp');">
  <a href="https://youtube.com/watch?v=eZTB4rH7Wh8" class="lyt-playbtn" title="Play Video">  
  <span class="lyt-visually-hidden">Play Video: Adding a light and dark mode with a toggle</span>
 </a> 
</lite-youtube><div class="right-me">
<small><strong>Published: </strong><time datetime="2024-04-21">21 April 2024</time></small>
</div><article>
<heading-anchors>
<div class="[ flow ][ page-layout ]">
<p>This is following on from chat <a href="/8/">episode 8</a> where Nathan and I finally started talking about designing the show's website.</p>
<p>In that episode I offered a rough homepage mock up and together we attempted to critically access it in the way various experts might.</p>
<p>Here I am looking at the light and dark mode toggle in that design. I'll share the code I'm initially going to use and also talk about my concerns over present implementations of this feature.</p>
<p>Offering a dark mode toggle is trending right now, but we are including it because It is not entirely inconceivable that one day this might be considered a standard for most websites.</p>
<p>I say this because browser and (particularly mobile) device vendors have good reasons to want to offer a portable web experience that can respond to the environmental light, available battery life and what the user personally finds comfortable. These vendors have a powerful influence on the W3C working groups which recently has been giving us many new ways to work with a variety of user preferences.</p>
<p>I can cover this better with Nathan when we do our planned chat episode on the user preferences we can, or soon will be able to, honour using CSS.</p>
<h2 id="embracing-the-dark-side">Embracing the dark side?</h2>
<p>The dark mode that's presently on the initial site was a whim. We wanted to start with only enough design to make our early content presentable and the dark aspect gave its stark appearance a little more interest with most sites being light.</p>
<p>Honouring a user's (system or browser) preference for dark or light is not technically difficult (at least with simple designs).</p>
<p>Since 2020, we can add to our CSS:</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Then if we create a HTML page the browsers own user agent styles will kick in.</p>
<p>If our device or browser is set to dark mode the browser will give us light text against a dark background and visa versus is set to light. It will also apply dark and light styling to the browser built in components as I previously used with the audio element.</p>
<p>Most will not want this as the styles colours added by browser are similar but not the same. I personally prefer Firefox's slightly lighter and blue tinged background to chrome's default.</p>
<p>To take control of our own light and dark colours we have the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme">prefers-color-scheme</a> media query. Baseline (which we talk about in <a href="/9/">episode 9</a> of the chat) classifies it as &quot;widely available&quot; across browsers. <a href="https://caniuse.com/?search=prefers-color-scheme">Can I use</a> in April 2024 says it is96% supported globally (higher in the UK and USA).</p>
<p>Very soon things may get easier when the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/light-dark">light-dark()</a> function gets better browser support. With this you will be able write your CSS like this:</p>
<p>body {color: light-dark(color-1, color-2);
background-color: light-dark (color-1, custom color-2);
}</p>
<p>or assign them to custom properties</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
 <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token property">--base</span><span class="token punctuation">:</span> <span class="token function">light-dark</span><span class="token punctuation">(</span><span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 10%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">light-dark</span><span class="token punctuation">(</span><span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 10%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="the-dark-mode-toggle-dilemma">The dark mode toggle dilemma</h2>
<p>Although initially some felt it was enough to let the user decide their preference via their browser or device settings I think most have come to realise that most users don't know there is this option and if they do they may not alway want it . The way to solve both issues is to offer a toggle switch on your site.</p>
<p>he good news is that thanks to the newly supported <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has">:has()</a> CSS relational pseudo-class we can create a toggle without needing JavaScript.</p>
<p>There is a <a href="https://codepen.io/bramus/pen/oNOwqMW">great demo of this</a> by Bramus Van Damme. He works for Google and is definitely someone to follow.</p>
<p>His light dark switch works by using :has() to see if an HTML input has been checked. If so, it uses that associated CSS rule if not it uses the other.</p>
<p>The snag with using this as a light and dark toggle is that it only applies to the page you are on. I set up a demo and concluded the experience is worse that not having a toogle.</p>
<h2 id="hello-js-my-old-friend">Hello JS my old friend</h2>
<p>If we want the user's toggled preference to remain until they say otherwise we need javaScript to hold this request in the user's local storage in their browser.</p>
<p>This is what I'm doing presently. The javaScript I used was prompted with Chat GPT, but seems to have been working fine on another site I did last year.</p>
<h3 id="javascript">javaScript</h3>
<pre class="language-js" tabindex="0"><code class="language-js">
 <span class="token comment">// Get the toggle button element by its ID</span>
<span class="token keyword">const</span> toggleButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dark-mode-toggle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get the root element of the document </span>
<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>

<span class="token comment">// Check if the user's system prefers dark mode</span>
<span class="token keyword">const</span> prefersDarkMode <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">;</span>

<span class="token comment">// Check if there's a stored color mode preference in local storage</span>
<span class="token keyword">const</span> storedMode <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'colorMode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// If there's a stored mode preference, add it to the root element's class list</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>storedMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>storedMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">// If there's no stored mode preference but the system prefers dark mode, add the dark mode class</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prefersDarkMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add an event listener to the toggle button for when it's clicked</span>
toggleButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Toggle the 'dark-mode' class on the root element</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Determine the current mode based on whether the 'dark-mode' class is present</span>
  <span class="token keyword">const</span> currentMode <span class="token operator">=</span> rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'dark-mode'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Store the current mode preference in local storage</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'colorMode'</span><span class="token punctuation">,</span> currentMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="css">CSS</h3>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token comment">/* colors*/</span>
  <span class="token property">--brand</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>355<span class="token punctuation">,</span> 81%<span class="token punctuation">,</span> 62%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--accent</span><span class="token punctuation">:</span>  <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 27%<span class="token punctuation">,</span> 40%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--base</span><span class="token punctuation">:</span><span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 90%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--text</span><span class="token punctuation">:</span>  <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 9%<span class="token punctuation">,</span> 82%<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token selector">.dark-mode</span> <span class="token punctuation">{</span>
  <span class="token property">--brand</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>355<span class="token punctuation">,</span> 81%<span class="token punctuation">,</span> 62%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--accent</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 81%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--base</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--text</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 95%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 9%<span class="token punctuation">,</span> 14%<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>


<span class="token selector">.toggle-area</span> <span class="token punctuation">{</span>
<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token property">justify-content</span><span class="token punctuation">:</span> end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle</span> <span class="token punctuation">{</span> 
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span> 
  <span class="token property">background-color</span><span class="token punctuation">:</span><span class="token function">var</span><span class="token punctuation">(</span>--brand<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle img</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span>inline<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span>.2rem<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> .4s<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle img:active</span><span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>90deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.dark-mode .moon</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>
  <span class="token selector">.dark-mode .sun</span> <span class="token punctuation">{</span>
   <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span></code></pre>
<h3 id="html">HTML</h3>
<pre class="language-html" tabindex="0"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggle-area<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark-mode-toggle<span class="token punctuation">"</span></span>       
  <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A toggle for a dark or light theme<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>      
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>moon<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/moon.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sun<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/sun.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  </code></pre>
<h2 id="some-light-in-the-darkness">Some light in the darkness</h2>
<p>I was not sure how to conclude this. I did not like the idea of relying on javaScript. I did not like that I could not use the prefers-color-scheme to swap my logo if I had a toggle.</p>
<p>Mostly I felt that if the overall aim of the W3C is to encourage a more user preference based web I am not sure that leaving web designers to come up with their own UI for this is the right way. More confusion for users and developers individually reinventing the wheel.</p>
<p>Then I discovered Bramus had a few days ago released a proof of concept [light and dark mode extension for chrome](https://www.bram.us/2023/10/09/the-future-of-css-easy-light-dark-mode-color-switching-with-light-dark/ target=). I missed it, but he has been arguing that there should be settings in the browser based on the web site viewed for a few years.</p>
<p>Certainly If all browsers did adopt it would address some of my uneasiness with it and make it easy for those wanting to only use HTML and CSS.</p>
<p>No doubt it would create other concerns like should it only show if the site has a light and dark mode to stop users pointless clicking for something that does not exist.</p>
<p>What I think this probably tells us is that the state of a user preference based web is very much in its infancy.</p>

</div>
</heading-anchors></article>
<div class="popout">

<nav aria-label="Post navigation">
  <ul class="links-nextprev">
    <li class="links-nextprev-prev">
    <a href="/8/" rel="prev" aria-label="Previous post:Designing an effective homepage">
    <span aria-hidden="true">←</span>Previous<br>Designing an effective homepage</a>
    </li>
    
    <li class="links-nextprev-next">
      <a href="/9/" rel="next" aria-label="Next post: Does Baseline solve our browser support problems?">
    <span class="next-post">Next<span aria-hidden="true">→</span></span> <br>Does Baseline solve our browser support problems?
      </a>
    </li>
    
  </ul>
</nav>
</div>			
</div></div></main><footer>
<h2 class="[ angle ]" id="links">Links</h2>  
<div class="[ footer-wrapper ]"><nav aria-labelledby="podcast-links" class="[ footer-links ][ fa1 ]">
<h3 id="podcast-links">For audio episodes</h3>
<ul> 
<li><a href="https://podcast.apple.com/us/podcast/no-script-show/id1721164461">Apple Podcast</a></li>
<li><a href="https://open.spotify.com/show/3Ki7eEhpGheFpmJOzZ0WEi">Spotify</a></li> 
<li><a href="https://castbox.fm/channel/id5744674?utm_campaign=ex_share_ch&utm_medium=exlink&country=us">Castbox.fm</a></li>
<li><a href="https://play.pocketcasts.com/podcasts/5a979010-7be1-013c-dc7c-0e76ec147af9">Pocket Casts</a></li>  
<li><a href="https://www.podcastrepublic.net/podcast/1721164461">Podcast Republic</a></li>
</ul>
</nav><nav class="[ footer-links ][ fa2 ]" id="more-navigation" aria-labelledby="more-here">
<h3 id="more-here">More pages</h3>
<ul>
<li><a href="/about/">About</a></li>
<li><a href="/contact/">Contact</a></li>        
<li><a href="/blog/">Archive</a></li>
<li><a href="https://noscript.show/feed/feed.xml">RSS Feed</a></li>
<li class="external-link"><a href="https://intrinsicframework.here24.co/">Intrinsic Framework <svg aria-hidden="true" fill="var(--text)" width="18px" height="18px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M19,14 L19,19 C19,20.1045695 18.1045695,21 17,21 L5,21 C3.8954305,21 3,20.1045695 3,19 L3,7 C3,5.8954305 3.8954305,5 5,5 L10,5 L10,7 L5,7 L5,19 L17,19 L17,14 L19,14 Z M18.9971001,6.41421356 L11.7042068,13.7071068 L10.2899933,12.2928932 L17.5828865,5 L12.9971001,5 L12.9971001,3 L20.9971001,3 L20.9971001,11 L18.9971001,11 L18.9971001,6.41421356 Z"></path>
</svg></a>
</li>
</ul>
</nav>
</div> 
<div class="back-to-top">
<a class="btn" href="#top" aria-label="back to top"> Back to top <span aria-hidden="true">▲</span></a>
</div>
<div class="[ fa3 ]">
<small><span aria-hidden="true">©</span> Copyright since 2023 | <a href="/privacy/"> Privacy </a>  | <a href="/accessibility-statement/"> Accessibility</a>  | <em>Built with <a href="https://www.11ty.dev/">Eleventy v3.1.0</a></em>
</small>
</div>
</footer><!-- This page `/learn/9/` was built on 2025-07-13T11:50:53.117Z -->
<script type="module" src="/dist/ffsqCfr5qq.js"></script>		
</body>
</html>