<!doctype html>
<html lang="en-gb" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adding a light and dark mode with a toggle. No Script Show</title>
<meta name="description" content="About adding a light or dark toogle to website and how this is not perfect but might become a standard.">
<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="No Script Show">
		
<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://noscript.show/learn/9/">
<meta property="og:title" content="No Script Show Adding a light and dark mode with a toggle">
<meta property="og:description" content="About adding a light or dark toogle to website and how this is not perfect but might become a standard.">
<meta property="og:image" content="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://noscript.show/learn/9/">
<meta property="twitter:title" content="No Script Show Adding a light and dark mode with a toggle">
<meta property="twitter:description" content="About adding a light or dark toogle to website and how this is not perfect but might become a standard.">
<meta property="twitter:image" content="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp">

<link rel="stylesheet" href="/dist/Qj4ExXWgfW.css">

 <meta name="generator" content="Eleventy v3.0.0">
		
		
		
		
	</head>
	<body>
		<button class="toggle" data-theme-toggle="" id="theme-toggle" style="display: none" type="button" aria-label=" light and dark mode switch">
        <img class="theme-icon" src="/svg/moon.svg" width="25" height="25" alt="dark and light theme switcher">
      </button>

		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">No Script Show</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/chat/">Chat</a></li>
					<li class="nav-item"><a href="/learn/">Learn</a></li>
					<li class="nav-item"><a href="/build/">Build</a></li>
					<li class="nav-item"><a href="/blog/">Archive</a></li>	 
	</ul></nav>

		</header>
<heading-anchors>
		<main class="[ page-layout ] [ flow ] " id="skip">
			
				
<h1 class="visually-hidden" id="adding-a-light-and-dark-mode-with-a-toggle">Adding a light and dark mode with a toggle</h1>

<div class="[ popout ]">

<lite-youtube videoid="eZTB4rH7Wh8" style="background-image: url('https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp');">
  <a href="https://youtube.com/watch?v=eZTB4rH7Wh8" class="lyt-playbtn" title="Play Video">   
  </a>
</lite-youtube>


<div class="right-me">
<ul class="post-metadata">
	<li><time datetime="2024-04-21">21 April 2024</time></li>
	<li><a href="/tags/learn/" class="post-tag">learn</a></li>
</ul>
</div>
</div>

<p>This is following on from podcast <a href="/8">episode 8</a> where Nathan and I finally started talking about designing the show's website.</p>
<p>In that episode I offered a rough homepage mock up and together we attempted to critically access it in the way various experts might.</p>
<p>Here I am looking at the light and dark mode toggle in that design. I'll share the code I'm initially going to use and also talk about my concerns over present implementations of this feature.</p>
<p>Offering a dark mode toggle is trending right now, but we are including it because It is not entirely inconceivable that one day this might be considered a standard for most websites.</p>
<p>I say this because browser and (particularly mobile) device vendors have good reasons to want to offer a portable web experience that can respond to the environmental light, available battery life and what the user personally finds comfortable. These vendors have a powerful influence on the W3C working groups which recently has been giving us many new ways to work with a variety of user preferences.</p>
<p>I can cover this better with Nathan when we do our planned podcast episode on the user preferences we can, or soon will be able to, honour using CSS.</p>
<h2 id="embracing-the-dark-side">Embracing the dark side?</h2>
<p>The dark mode that's presently on the initial site was a whim. We wanted to start with only enough design to make our early content presentable and the dark aspect gave its stark appearance a little more interest with most sites being light.</p>
<p>Honouring a user's (system or browser) preference for dark or light is not technically difficult (at least with simple designs).</p>
<p>Since 2020, we can add to our CSS:</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Then if we create a HTML page the browsers own user agent styles will kick in.</p>
<p>If our device or browser is set to dark mode the browser will give us light text against a dark background and visa versus is set to light. It will also apply dark and light styling to the browser built in components as I previously used with the audio element.</p>
<p>Most will not want this as the styles colours added by browser are similar but not the same. I personally prefer Firefox's slightly lighter and blue tinged background to chrome's default.</p>
<p>To take control of our own light and dark colours we have the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme">prefers-color-scheme</a> media query. Baseline (which we talk about in <a href="/9">episode 9</a> of the podcast) classifies it as &quot;widely available&quot; across browsers. <a href="https://caniuse.com/?search=prefers-color-scheme">Can I use</a> in April 2024 says it is96% supported globally (higher in the UK and USA).</p>
<p>Very soon things may get easier when the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/light-dark">light-dark()</a> function gets better browser support. With this you will be able write your CSS like this:</p>
<p>body {color: light-dark(color-1, color-2);
background-color: light-dark (color-1, custom color-2);
}</p>
<p>or assign them to custom properties</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
 <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token property">--base</span><span class="token punctuation">:</span> <span class="token function">light-dark</span><span class="token punctuation">(</span><span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 10%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">light-dark</span><span class="token punctuation">(</span><span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 10%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="the-dark-mode-toggle-dilemma">The dark mode toggle dilemma</h2>
<p>Although initially some felt it was enough to let the user decide their preference via their browser or device settings I think most have come to realise that most users don't know there is this option and if they do they may not alway want it . The way to solve both issues is to offer a toggle switch on your site.</p>
<p>he good news is that thanks to the newly supported <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has">:has()</a> CSS relational pseudo-class we can create a toggle without needing JavaScript.</p>
<p>There is a <a href="https://codepen.io/bramus/pen/oNOwqMW">great demo of this</a> by Bramus Van Damme. He works for Google and is definitely someone to follow.</p>
<p>His light dark switch works by using :has() to see if an HTML input has been checked. If so, it uses that associated CSS rule if not it uses the other.</p>
<p>The snag with using this as a light and dark toggle is that it only applies to the page you are on. I set up a demo and concluded the experience is worse that not having a toogle.</p>
<h2 id="hello-js-my-old-friend">Hello JS my old friend</h2>
<p>If we want the user's toggled preference to remain until they say otherwise we need javaScript to hold this request in the user's local storage in their browser.</p>
<p>This is what I'm doing presently. The javaScript I used was prompted with Chat GPT, but seems to have been working fine on another site I did last year.</p>
<h3 id="javascript">javaScript</h3>
<pre class="language-js" tabindex="0"><code class="language-js">
 <span class="token comment">// Get the toggle button element by its ID</span>
<span class="token keyword">const</span> toggleButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dark-mode-toggle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get the root element of the document </span>
<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>

<span class="token comment">// Check if the user's system prefers dark mode</span>
<span class="token keyword">const</span> prefersDarkMode <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">;</span>

<span class="token comment">// Check if there's a stored color mode preference in local storage</span>
<span class="token keyword">const</span> storedMode <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'colorMode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// If there's a stored mode preference, add it to the root element's class list</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>storedMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>storedMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">// If there's no stored mode preference but the system prefers dark mode, add the dark mode class</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prefersDarkMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add an event listener to the toggle button for when it's clicked</span>
toggleButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Toggle the 'dark-mode' class on the root element</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Determine the current mode based on whether the 'dark-mode' class is present</span>
  <span class="token keyword">const</span> currentMode <span class="token operator">=</span> rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'dark-mode'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Store the current mode preference in local storage</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'colorMode'</span><span class="token punctuation">,</span> currentMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="css">CSS</h3>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token comment">/* colors*/</span>
  <span class="token property">--brand</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>355<span class="token punctuation">,</span> 81%<span class="token punctuation">,</span> 62%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--accent</span><span class="token punctuation">:</span>  <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 27%<span class="token punctuation">,</span> 40%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--base</span><span class="token punctuation">:</span><span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 90%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--text</span><span class="token punctuation">:</span>  <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 9%<span class="token punctuation">,</span> 82%<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token selector">.dark-mode</span> <span class="token punctuation">{</span>
  <span class="token property">--brand</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>355<span class="token punctuation">,</span> 81%<span class="token punctuation">,</span> 62%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--accent</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 81%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--base</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--text</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 95%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 9%<span class="token punctuation">,</span> 14%<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>


<span class="token selector">.toggle-area</span> <span class="token punctuation">{</span>
<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token property">justify-content</span><span class="token punctuation">:</span> end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle</span> <span class="token punctuation">{</span> 
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span> 
  <span class="token property">background-color</span><span class="token punctuation">:</span><span class="token function">var</span><span class="token punctuation">(</span>--brand<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle img</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span>inline<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span>.2rem<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> .4s<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle img:active</span><span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>90deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.dark-mode .moon</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>
  <span class="token selector">.dark-mode .sun</span> <span class="token punctuation">{</span>
   <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span></code></pre>
<h3 id="html">HTML</h3>
<pre class="language-html" tabindex="0"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggle-area<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark-mode-toggle<span class="token punctuation">"</span></span>       
  <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A toggle for a dark or light theme<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>      
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>moon<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/moon.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sun<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/sun.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  </code></pre>
<h2 id="some-light-in-the-darkness">Some light in the darkness</h2>
<p>I was not sure how to conclude this. I did not like the idea of relying on javaScript. I did not like that I could not use the prefers-color-scheme to swap my logo if I had a toggle.</p>
<p>Mostly I felt that if the overall aim of the W3C is to encourage a more user preference based web I am not sure that leaving web designers to come up with their own UI for this is the right way. More confusion for users and developers individually reinventing the wheel.</p>
<p>Then I discovered Bramus had a few days ago released a proof of concept [light and dark mode extension for chrome](https://www.bram.us/2023/10/09/the-future-of-css-easy-light-dark-mode-color-switching-with-light-dark/ target=). I missed it, but he has been arguing that there should be settings in the browser based on the web site viewed for a few years.</p>
<p>Certainly If all browsers did adopt it would address some of my uneasiness with it and make it easy for those wanting to only use HTML and CSS.</p>
<p>No doubt it would create other concerns like should it only show if the site has a light and dark mode to stop users pointless clicking for something that does not exist.</p>
<p>What I think this probably tells us is that the state of a user preference based web is very much in its infancy.</p>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/8/">Designing an effective homepage</a></li><li class="links-nextprev-next">Next →<br><a href="/9/">Does Baseline solve our browser support problems?</a></li>
</ul>
			
		</main>
</heading-anchors>
		<footer>
			<small><em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em>
			| <a href="/feed/feed.xml">RSS Feed</a></small>
		</footer>

		<!-- This page `/learn/9/` was built on 2025-02-06T12:14:23.232Z -->
		<script type="module" src="/dist/Sf_-fSrx_J.js"></script>
		
	</body>
</html>
