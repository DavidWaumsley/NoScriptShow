<!doctype html>
<html lang="en-gb" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adding a light and dark mode with a toggle</title>
<script>  
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
</script> 
<link rel="icon" type="img/x-icon" href="/svg/favicon.svg">
<link rel="icon" href="img/favicon.ico" sizes="any">

<meta name="description" content="About adding a light or dark toogle to website and how this is not perfect but might become a standard.">
<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="No Script Show | Making Websites Simple Again.">

<link rel="stylesheet" href="/dist/_M_p3fhXqw.css">

   
 
 <link rel="preload" as="image" href="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp">
 
		
<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://noscript.show/learn/9/">
<meta property="og:title" content="No Script Show Adding a light and dark mode with a toggle">
<meta property="og:description" content="About adding a light or dark toogle to website and how this is not perfect but might become a standard.">

<meta property="og:image" content="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp">


<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://noscript.show/learn/9/">
<meta property="twitter:title" content="No Script Show Adding a light and dark mode with a toggle">
<meta property="twitter:description" content="About adding a light or dark toogle to website and how this is not perfect but might become a standard.">

<meta property="twitter:image" content="https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp">



 <link rel="preload" href="/fonts/UbuntuMono-Bold.woff2" as="font" type="font/woff2" crossorigin="">
 <link rel="preload" href="/fonts/UbuntuMono-Regular.woff2" as="font" type="font/woff2" crossorigin="">
 <meta name="generator" content="Eleventy v3.0.0">
</head>
<body>
<a href="#skip" class="[ skip-link ]">Skip to main content</a>

<div class="[ top-bar ]">
<button class="[ toggle ]" data-theme-toggle="" id="theme-toggle" style="display: none" type="button" aria-label=" light and dark mode switch">
<img class="theme-icon" src="/svg/moon.svg" width="25" height="25" alt="">
</button>
</div>	

  <header>
<a class="logo" href="/"><svg aria-labelledby="my-title" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 998 575">
<title id="my-title">No Script Show Logo</title>
<defs><path id="a" d="m89.775 203.598 71.329 39.531q5.37 3.007 7.143 5.371 1.773 2.363 1.773 6.016 0 4.619-3.33 8.003-3.331 3.383-7.735 3.383-2.9 0-8.701-3.222l-106.24-59.082 106.24-59.082q5.8-3.116 8.594-3.116 4.511 0 7.842 3.33t3.33 7.95q0 3.653-1.773 6.015-1.772 2.364-7.143 5.371z" style="fill:var(--text);fill-rule:nonzero"></path><path id="b" d="M400.121 256.642c0-70.15-12.477-127.102-27.845-127.102s-27.845 56.952-27.845 127.102V450.38c0 70.15 12.477 127.102 27.845 127.102s27.845-56.952 27.845-127.102z" style="fill:var(--brand)"></path></defs><use xlink:href="#a" style="fill:var(--text);fill-rule:nonzero" transform="translate(-147.298 -473.214)scale(3.34662)"></use><use xlink:href="#a" style="fill:var(--text);fill-rule:nonzero" transform="matrix(-3.34662 0 0 3.34662 1142.63 -473.214)"></use><path d="M400.121 176.416c0-25.872-12.477-46.876-27.845-46.876s-27.845 21.004-27.845 46.876v354.19c0 25.871 12.477 46.876 27.845 46.876s27.845-21.005 27.845-46.876z" style="fill:var(--brand)" transform="matrix(1.08507 0 0 .64455 96.053 -19.526)"></path><path d="M400.121 195.644c0-36.484-12.477-66.104-27.845-66.104s-27.845 29.62-27.845 66.104v315.734c0 36.484 12.477 66.104 27.845 66.104s27.845-29.62 27.845-66.104z" style="fill:var(--brand)" transform="matrix(.87132 0 0 .36703 263.223 78.582)"></path><use xlink:href="#b" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 384.847 150.818)"></use><use xlink:href="#b" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 63.41 150.818)"></use><path d="M400.121 198.434c0-38.024-12.477-68.894-27.845-68.894s-27.845 30.87-27.845 68.894v310.154c0 38.023 12.477 68.894 27.845 68.894s27.845-30.871 27.845-68.894z" style="fill:var(--brand)" transform="matrix(.9081 0 0 .36703 67.663 78.582)"></path><path d="M138.901 766.819v5.833h-14.167v45.75h-6.833v-45.75h-14.167v-5.833zm9.167 51.583v-56.583l6.916-1.167v19.667q1.666-.667 3.75-1.042t4.084-.375q4.416 0 7.375 1.292 2.958 1.291 4.708 3.625t2.5 5.583.75 7.167v21.833h-6.833v-20.333q0-7.167-2-10.125-2.001-2.96-7.167-2.959a19 19 0 0 0-4.208.459q-2.043.458-2.959.875v32.083zm57.333-39.583q7.833 0 12.083 4.875t4.25 14.791v2.417h-27.666q.416 6 3.958 9.125c3.542 3.125 5.68 3.125 9.958 3.125q3.667 0 6.25-.583 2.583-.584 3.917-1.25l.917 5.833q-1.251.667-4.5 1.417t-7.334.75q-5 0-8.791-1.542t-6.292-4.208q-2.5-2.667-3.75-6.375t-1.25-8.042q0-5.168 1.583-9 1.584-3.834 4.167-6.333 2.584-2.5 5.833-3.75a18.4 18.4 0 0 1 6.667-1.25m9.333 16.5q0-4.917-2.583-7.792t-6.833-2.875q-2.418 0-4.375.917a11 11 0 0 0-3.375 2.416q-1.417 1.5-2.25 3.417a14.2 14.2 0 0 0-1.084 3.917zm58.334-14.5a72 72 0 0 1 7.458-1.417q3.708-.5 6.958-.5 7.75 0 11.709 4 3.957 4 3.958 12.833v22.667h-6.833v-21.417q0-3.75-.667-6.083-.668-2.334-1.875-3.625a6.4 6.4 0 0 0-2.917-1.792q-1.709-.5-3.708-.5-1.667 0-3.542.209-1.875.207-3.625.541v32.667h-6.916zm74.083 18.25q0 4.583-1.292 8.291-1.291 3.708-3.625 6.375a16.1 16.1 0 0 1-5.583 4.125q-3.25 1.458-7.083 1.459-3.75 0-6.959-1.459a16.2 16.2 0 0 1-5.541-4.125q-2.334-2.667-3.625-6.375-1.293-3.708-1.292-8.291t1.292-8.334 3.625-6.375a16.4 16.4 0 0 1 5.541-4.083q3.209-1.458 6.959-1.458 3.832 0 7.083 1.458a16.3 16.3 0 0 1 5.583 4.083q2.334 2.625 3.625 6.375 1.292 3.75 1.292 8.334m-7.083 0q0-6.584-2.834-10.375t-7.666-3.792q-4.75 0-7.542 3.792t-2.792 10.375q0 6.5 2.792 10.291t7.542 3.792q4.833 0 7.666-3.792t2.834-10.291m81.333 9.666q0-2.084-1.708-3.416-1.709-1.334-4.25-2.334a91 91 0 0 0-5.542-1.958q-3-.959-5.542-2.375-2.541-1.417-4.25-3.5-1.708-2.084-1.708-5.417 0-4.666 3.792-7.791t11.875-3.125q3.166 0 6.541.458t5.792 1.208l-1.25 6.167q-.668-.333-1.833-.708a23 23 0 0 0-2.667-.667q-1.5-.292-3.208-.458a34 34 0 0 0-3.292-.167q-9 0-9 4.917 0 1.749 1.708 2.958 1.709 1.208 4.292 2.208t5.583 2.042 5.584 2.542 4.291 3.625q1.709 2.124 1.709 5.375 0 5.25-4.084 8.125t-12.916 2.875q-4 0-7.334-.667a30 30 0 0 1-6.333-2l1.333-6.25a40 40 0 0 0 6.125 2.208q3.209.875 6.875.875 9.417 0 9.417-4.75m16.5-9.583q0-5.25 1.667-9.083 1.666-3.834 4.583-6.334 2.916-2.5 6.792-3.708t8.291-1.208q2.834 0 5.625.375t5.959 1.375l-1.584 5.916q-2.75-1-5.041-1.291a37 37 0 0 0-4.625-.292q-3 0-5.667.792-2.667.791-4.625 2.5-1.959 1.708-3.125 4.416-1.167 2.709-1.167 6.542 0 3.666 1.084 6.292 1.083 2.625 3.041 4.333 1.959 1.708 4.709 2.542t6.083.833a43 43 0 0 0 5.125-.292q2.458-.291 5.375-1.291l1 5.75a30 30 0 0 1-5.917 1.541q-3 .459-6.5.459-4.666 0-8.541-1.292-3.876-1.291-6.667-3.792t-4.333-6.291q-1.542-3.792-1.542-8.792m46.5 19.25v-36.583q8.5-2.917 17.167-2.917 2.666 0 5.083.208 2.417.209 5.333.875l-1.25 6.084q-2.667-.75-4.708-.959a44 44 0 0 0-4.458-.208q-5.084 0-10.334 1.417v32.083zm50.167-44.667q-2.168 0-3.75-1.5-1.584-1.5-1.584-4.083c0-2.583.528-3.083 1.584-4.083q1.582-1.5 3.75-1.5 2.25 0 3.791 1.5c1.541 1.5 1.542 2.361 1.542 4.083s-.514 3.083-1.542 4.083-2.291 1.5-3.791 1.5m-1.75 11.75h-11.167v-5.75h18v23.75q0 5.75 1.583 7.709 1.584 1.958 4.75 1.958 2.416 0 4.459-.583 2.041-.584 3.208-1.25l1 5.833q-.5.25-1.417.625a19 19 0 0 1-2.125.708q-1.208.333-2.666.584-1.46.25-3.042.25-3.667 0-6.083-1-2.418-1-3.875-3-1.459-2.001-2.042-4.959t-.583-6.875zm57.25 13.667q0-6.75-3.167-10.458-3.166-3.71-8.25-3.709-2.834 0-4.458.25-1.626.25-2.542.584v24.416q1.167 1.083 3.417 2t4.666.917q2.75 0 4.709-1.083a9.1 9.1 0 0 0 3.208-2.959q1.25-1.875 1.833-4.416.584-2.542.584-5.542m7.083 0q0 4.416-1.125 8.125t-3.25 6.375a14.9 14.9 0 0 1-5.208 4.167q-3.084 1.5-7 1.5-3.084 0-5.417-.75t-3.5-1.667v15.25h-6.917v-51.25q2.25-.667 5.792-1.333 3.541-.667 8.125-.667 4.166 0 7.583 1.417 3.417 1.416 5.834 4.041t3.75 6.375q1.332 3.75 1.333 8.417m23.583-19.417h16.334v5.75h-16.334v18q0 2.917.417 4.75t1.375 2.959c.958 1.126 1.458 1.263 2.458 1.541q1.5.417 3.667.417 3 0 4.833-.5a19 19 0 0 0 3.5-1.333l1 5.833q-1.167.5-3.708 1.333-2.542.834-6.292.834-4.334 0-7.083-1t-4.292-3-2.125-4.959-.583-6.875v-18h-8.167v-5.75h8.167v-10.833l6.833-1.167zm92.334 29q0-2.084-1.709-3.416-1.708-1.334-4.25-2.334a90 90 0 0 0-5.541-1.958q-3-.959-5.542-2.375-2.542-1.417-4.25-3.5t-1.708-5.417q0-4.666 3.791-7.791t11.875-3.125q3.167 0 6.542.458t5.792 1.208l-1.25 6.167q-.667-.333-1.834-.708a23 23 0 0 0-2.666-.667q-1.5-.292-3.209-.458a34 34 0 0 0-3.291-.167q-9 0-9 4.917 0 1.749 1.708 2.958 1.708 1.208 4.292 2.208t5.583 2.042q3 1.041 5.583 2.542t4.292 3.625q1.708 2.124 1.708 5.375 0 5.25-4.083 8.125t-12.917 2.875q-4 0-7.333-.667a30 30 0 0 1-6.333-2l1.333-6.25a40 40 0 0 0 6.125 2.208q3.208.875 6.875.875 9.417 0 9.417-4.75m18.333 9.667v-56.583l6.917-1.167v19.667q1.666-.667 3.75-1.042t4.083-.375q4.417 0 7.375 1.292 2.958 1.291 4.708 3.625t2.5 5.583.75 7.167v21.833h-6.833v-20.333q0-7.167-2-10.125-2-2.96-7.167-2.959-2.166 0-4.208.459-2.041.458-2.958.875v32.083zm74.083-19.333q0 4.583-1.291 8.291-1.293 3.708-3.625 6.375a16.1 16.1 0 0 1-5.584 4.125q-3.25 1.458-7.083 1.459-3.75 0-6.958-1.459a16.2 16.2 0 0 1-5.542-4.125q-2.334-2.667-3.625-6.375-1.292-3.708-1.292-8.291t1.292-8.334c1.292-3.75 2.069-4.625 3.625-6.375a16.4 16.4 0 0 1 5.542-4.083q3.208-1.458 6.958-1.458 3.833 0 7.083 1.458a16.3 16.3 0 0 1 5.584 4.083q2.332 2.625 3.625 6.375 1.291 3.75 1.291 8.334m-7.083 0q0-6.584-2.833-10.375t-7.667-3.792q-4.75 0-7.542 3.792t-2.791 10.375q0 6.5 2.791 10.291t7.542 3.792q4.833 0 7.667-3.792t2.833-10.291m39 19.333a137 137 0 0 1-2.167-5.167 319 319 0 0 1-1.791-4.666 188 188 0 0 1-1.75-4.875 481 481 0 0 0-2.042-5.792q-1.167 3.25-2.083 5.792a441 441 0 0 1-1.792 4.875 164 164 0 0 1-1.833 4.666 217 217 0 0 1-2.209 5.167h-5.166a288 288 0 0 1-3.875-20.292q-1.542-10.041-2.292-18.375h6.5q.25 3.25.542 6.375.291 3.125.708 6.542t.958 7.417 1.209 9a226 226 0 0 0 2.25-5.834 170 170 0 0 0 3.125-9.333q.708-2.334 1.541-5.25h5.167l1.5 5.25q.667 2.333 1.417 4.583l1.583 4.75a136 136 0 0 0 2.083 5.75q.75-4.583 1.334-8.5.582-3.916 1-7.375.416-3.457.75-6.708.333-3.25.583-6.667h6.25q-.417 4.167-1 8.917a229 229 0 0 1-1.417 9.75 371 371 0 0 1-1.833 10.125 322 322 0 0 1-2.083 9.875z" style="fill:var(--text);fill-rule:nonzero" transform="translate(-136.559 -536.567)scale(1.33572)"></path></svg></a>

<nav>
<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
<ul class="nav">
<li class="nav-item"><a href="/">Home</a></li>
<li class="nav-item"><a href="/chat/">Chat</a></li>
<li class="nav-item"><a href="/learn/">Learn</a></li>
<li class="nav-item"><a href="/build/">Build</a></li><li class="nav-item"><a href="#more-navigation">More...</a> </li>
</ul>					

</nav>
</header>
<main class="[ page-layout ] [ flow ]" id="skip">			
				

<h1 class="visually-hidden" id="adding-a-light-and-dark-mode-with-a-toggle">Adding a light and dark mode with a toggle</h1>

<div class="[ popout ]">

<lite-youtube videoid="eZTB4rH7Wh8" style="background-image: url('https://i.ytimg.com/vi_webp/eZTB4rH7Wh8/maxresdefault.webp');">
  <a href="https://youtube.com/watch?v=eZTB4rH7Wh8" class="lyt-playbtn" title="Play Video">   
  </a>
</lite-youtube>


<div class="right-me">
<ul class="post-metadata">
	<li><time datetime="2024-04-21">21 April 2024</time></li>
	<li><a href="/tags/learn/" class="post-tag">learn</a></li>
</ul>
</div>
</div>
<article>
<heading-anchors>
	<div class="flow">
<p>This is following on from chat <a href="/8">episode 8</a> where Nathan and I finally started talking about designing the show's website.</p>
<p>In that episode I offered a rough homepage mock up and together we attempted to critically access it in the way various experts might.</p>
<p>Here I am looking at the light and dark mode toggle in that design. I'll share the code I'm initially going to use and also talk about my concerns over present implementations of this feature.</p>
<p>Offering a dark mode toggle is trending right now, but we are including it because It is not entirely inconceivable that one day this might be considered a standard for most websites.</p>
<p>I say this because browser and (particularly mobile) device vendors have good reasons to want to offer a portable web experience that can respond to the environmental light, available battery life and what the user personally finds comfortable. These vendors have a powerful influence on the W3C working groups which recently has been giving us many new ways to work with a variety of user preferences.</p>
<p>I can cover this better with Nathan when we do our planned chat episode on the user preferences we can, or soon will be able to, honour using CSS.</p>
<h2 id="embracing-the-dark-side">Embracing the dark side?</h2>
<p>The dark mode that's presently on the initial site was a whim. We wanted to start with only enough design to make our early content presentable and the dark aspect gave its stark appearance a little more interest with most sites being light.</p>
<p>Honouring a user's (system or browser) preference for dark or light is not technically difficult (at least with simple designs).</p>
<p>Since 2020, we can add to our CSS:</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Then if we create a HTML page the browsers own user agent styles will kick in.</p>
<p>If our device or browser is set to dark mode the browser will give us light text against a dark background and visa versus is set to light. It will also apply dark and light styling to the browser built in components as I previously used with the audio element.</p>
<p>Most will not want this as the styles colours added by browser are similar but not the same. I personally prefer Firefox's slightly lighter and blue tinged background to chrome's default.</p>
<p>To take control of our own light and dark colours we have the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme">prefers-color-scheme</a> media query. Baseline (which we talk about in <a href="/9">episode 9</a> of the chat) classifies it as &quot;widely available&quot; across browsers. <a href="https://caniuse.com/?search=prefers-color-scheme">Can I use</a> in April 2024 says it is96% supported globally (higher in the UK and USA).</p>
<p>Very soon things may get easier when the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/light-dark">light-dark()</a> function gets better browser support. With this you will be able write your CSS like this:</p>
<p>body {color: light-dark(color-1, color-2);
background-color: light-dark (color-1, custom color-2);
}</p>
<p>or assign them to custom properties</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
 <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token property">--base</span><span class="token punctuation">:</span> <span class="token function">light-dark</span><span class="token punctuation">(</span><span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 10%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">light-dark</span><span class="token punctuation">(</span><span class="token function">hsl</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 10%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="the-dark-mode-toggle-dilemma">The dark mode toggle dilemma</h2>
<p>Although initially some felt it was enough to let the user decide their preference via their browser or device settings I think most have come to realise that most users don't know there is this option and if they do they may not alway want it . The way to solve both issues is to offer a toggle switch on your site.</p>
<p>he good news is that thanks to the newly supported <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has">:has()</a> CSS relational pseudo-class we can create a toggle without needing JavaScript.</p>
<p>There is a <a href="https://codepen.io/bramus/pen/oNOwqMW">great demo of this</a> by Bramus Van Damme. He works for Google and is definitely someone to follow.</p>
<p>His light dark switch works by using :has() to see if an HTML input has been checked. If so, it uses that associated CSS rule if not it uses the other.</p>
<p>The snag with using this as a light and dark toggle is that it only applies to the page you are on. I set up a demo and concluded the experience is worse that not having a toogle.</p>
<h2 id="hello-js-my-old-friend">Hello JS my old friend</h2>
<p>If we want the user's toggled preference to remain until they say otherwise we need javaScript to hold this request in the user's local storage in their browser.</p>
<p>This is what I'm doing presently. The javaScript I used was prompted with Chat GPT, but seems to have been working fine on another site I did last year.</p>
<h3 id="javascript">javaScript</h3>
<pre class="language-js" tabindex="0"><code class="language-js">
 <span class="token comment">// Get the toggle button element by its ID</span>
<span class="token keyword">const</span> toggleButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dark-mode-toggle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get the root element of the document </span>
<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>

<span class="token comment">// Check if the user's system prefers dark mode</span>
<span class="token keyword">const</span> prefersDarkMode <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">;</span>

<span class="token comment">// Check if there's a stored color mode preference in local storage</span>
<span class="token keyword">const</span> storedMode <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'colorMode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// If there's a stored mode preference, add it to the root element's class list</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>storedMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>storedMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">// If there's no stored mode preference but the system prefers dark mode, add the dark mode class</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prefersDarkMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add an event listener to the toggle button for when it's clicked</span>
toggleButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Toggle the 'dark-mode' class on the root element</span>
  rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Determine the current mode based on whether the 'dark-mode' class is present</span>
  <span class="token keyword">const</span> currentMode <span class="token operator">=</span> rootElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'dark-mode'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Store the current mode preference in local storage</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'colorMode'</span><span class="token punctuation">,</span> currentMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="css">CSS</h3>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token comment">/* colors*/</span>
  <span class="token property">--brand</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>355<span class="token punctuation">,</span> 81%<span class="token punctuation">,</span> 62%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--accent</span><span class="token punctuation">:</span>  <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 27%<span class="token punctuation">,</span> 40%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--base</span><span class="token punctuation">:</span><span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 90%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--text</span><span class="token punctuation">:</span>  <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 9%<span class="token punctuation">,</span> 82%<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token selector">.dark-mode</span> <span class="token punctuation">{</span>
  <span class="token property">--brand</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>355<span class="token punctuation">,</span> 81%<span class="token punctuation">,</span> 62%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--accent</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 81%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--base</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 10%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--text</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 8%<span class="token punctuation">,</span> 95%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--shade</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 9%<span class="token punctuation">,</span> 14%<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>


<span class="token selector">.toggle-area</span> <span class="token punctuation">{</span>
<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token property">justify-content</span><span class="token punctuation">:</span> end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle</span> <span class="token punctuation">{</span> 
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span> 
  <span class="token property">background-color</span><span class="token punctuation">:</span><span class="token function">var</span><span class="token punctuation">(</span>--brand<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle img</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span>inline<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span>.2rem<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> .4s<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token selector">#dark-mode-toggle img:active</span><span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>90deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.dark-mode .moon</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>
  <span class="token selector">.dark-mode .sun</span> <span class="token punctuation">{</span>
   <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span></code></pre>
<h3 id="html">HTML</h3>
<pre class="language-html" tabindex="0"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggle-area<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark-mode-toggle<span class="token punctuation">"</span></span>       
  <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A toggle for a dark or light theme<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>      
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>moon<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/moon.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sun<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/sun.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  </code></pre>
<h2 id="some-light-in-the-darkness">Some light in the darkness</h2>
<p>I was not sure how to conclude this. I did not like the idea of relying on javaScript. I did not like that I could not use the prefers-color-scheme to swap my logo if I had a toggle.</p>
<p>Mostly I felt that if the overall aim of the W3C is to encourage a more user preference based web I am not sure that leaving web designers to come up with their own UI for this is the right way. More confusion for users and developers individually reinventing the wheel.</p>
<p>Then I discovered Bramus had a few days ago released a proof of concept [light and dark mode extension for chrome](https://www.bram.us/2023/10/09/the-future-of-css-easy-light-dark-mode-color-switching-with-light-dark/ target=). I missed it, but he has been arguing that there should be settings in the browser based on the web site viewed for a few years.</p>
<p>Certainly If all browsers did adopt it would address some of my uneasiness with it and make it easy for those wanting to only use HTML and CSS.</p>
<p>No doubt it would create other concerns like should it only show if the site has a light and dark mode to stop users pointless clicking for something that does not exist.</p>
<p>What I think this probably tells us is that the state of a user preference based web is very much in its infancy.</p>

</div></heading-anchors></article>


<div class="popout">

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/8/">Designing an effective homepage</a></li><li class="links-nextprev-next">Next →<br><a href="/9/">Does Baseline solve our browser support problems?</a></li>
</ul>
</div>
			
</main>	
  <footer>

<h2 class="[ angle ]" id="stuff">Stuff</h2>  

<div class="[ footer-wrapper ]">

<nav class="[ footer-links ][ fa1 ]">
<h3 id="audio-episodes">Audio episodes</h3>

<ul> 
<li><a href="https://podcast.apple.com/us/podcast/no-script-show/id1721164461">Apple Podcast</a></li>  
<li><a href="https://open.spotify.com/show/3Ki7eEhpGheFpmJOzZ0WEi">Spotify</a></li> 
<li><a href="https://castbox.fm/channel/id5744674?utm_campaign=ex_share_ch&utm_medium=exlink&country=us">Castbox.fm</a></li>
<li><a href="https://www.podcastrepublic.net/podcast/1721164461">Podcast Republic</a></li>
<li><a href="https://feeds.hubhopper.com/9698ac00a8141974e116d9298f9f87c8.rss">Podcast Feed</a></li>   
</ul>
</nav>

<nav class="[ footer-links ][ fa2 ]" id="more-navigation" aria-label="More on this site">
<h3 id="useful-links">Useful links</h3>
<ul role="list">
<li><a href="/about">About</a></li>
<li><a href="/contact">Contact</a></li>        
<li><a href="/blog">Archive</a></li>
<li><a href="/feed/feed.xml">RSS Feed</a></li>
<li><a href="/resources">Resources</a></li>
</ul>
</nav>
</div>

<div class="[ fa3 ]">
<small>© Copyright since 2023 | <a href="/privacy"> Privacy </a> | <em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em>
</small>

 </div>
</footer>

		<!-- This page `/learn/9/` was built on 2025-05-10T08:13:42.442Z -->
		<script type="module" src="/dist/2it2F9Kmpn.js"></script>		
</body>
</html>