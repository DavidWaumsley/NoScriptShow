<!doctype html>
<html lang="en-gb" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Embedding YouTube videos for performance</title>
<script>  
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
</script> 
<link rel="icon" type="img/x-icon" href="/svg/favicon.svg">
<link rel="icon" href="img/favicon.ico" sizes="any">

<meta name="description" content="Looking at a web component called Lite YouTube Embed by Paul Irish which allows us to embed YouTube videos without automatically forcing  visitors to download all of YouTube&#39;s associated assets.">
<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="No Script Show | Making websites simple again.">

<link rel="stylesheet" href="/dist/TZc4srN0Rc.css">

   
 
 <link rel="preload" as="image" href="https://i.ytimg.com/vi_webp/dt3XR_X22GY/maxresdefault.webp">
 
		
<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://noscript.show/learn/6/">
<meta property="og:title" content="No Script Show Embedding YouTube videos for performance">
<meta property="og:description" content="Looking at a web component called Lite YouTube Embed by Paul Irish which allows us to embed YouTube videos without automatically forcing  visitors to download all of YouTube&#39;s associated assets.">

<meta property="og:image" content="https://i.ytimg.com/vi_webp/dt3XR_X22GY/maxresdefault.webp">


<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://noscript.show/learn/6/">
<meta property="twitter:title" content="No Script Show Embedding YouTube videos for performance">
<meta property="twitter:description" content="Looking at a web component called Lite YouTube Embed by Paul Irish which allows us to embed YouTube videos without automatically forcing  visitors to download all of YouTube&#39;s associated assets.">

<meta property="twitter:image" content="https://i.ytimg.com/vi_webp/dt3XR_X22GY/maxresdefault.webp">



 <link rel="preload" href="/fonts/UbuntuMono-Bold.woff2" as="font" type="font/woff2" crossorigin="">
 <link rel="preload" href="/fonts/UbuntuMono-Regular.woff2" as="font" type="font/woff2" crossorigin="">
 <meta name="generator" content="Eleventy v3.0.0">
</head>
<body>
<a href="#skip" class="[ skip-link ]">Skip to main content</a>

<div class="[ top-bar ]">
<button class="[ toggle ]" data-theme-toggle="" id="theme-toggle" style="display: none" type="button" aria-label=" light and dark mode switch">
<img class="theme-icon" src="/svg/moon.svg" width="25" height="25" alt="">
</button>
</div>	

  <header>
<a class="logo" href="/"><svg aria-labelledby="my-title" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 998 575">
<title id="my-title">No Script Show Logo</title>
<defs><path id="a" d="m89.775 203.598 71.329 39.531q5.37 3.007 7.143 5.371 1.773 2.363 1.773 6.016 0 4.619-3.33 8.003-3.331 3.383-7.735 3.383-2.9 0-8.701-3.222l-106.24-59.082 106.24-59.082q5.8-3.116 8.594-3.116 4.511 0 7.842 3.33t3.33 7.95q0 3.653-1.773 6.015-1.772 2.364-7.143 5.371z" style="fill:var(--text);fill-rule:nonzero"></path><path id="b" d="M400.121 256.642c0-70.15-12.477-127.102-27.845-127.102s-27.845 56.952-27.845 127.102V450.38c0 70.15 12.477 127.102 27.845 127.102s27.845-56.952 27.845-127.102z" style="fill:var(--brand)"></path></defs><use xlink:href="#a" style="fill:var(--text);fill-rule:nonzero" transform="translate(-147.298 -473.214)scale(3.34662)"></use><use xlink:href="#a" style="fill:var(--text);fill-rule:nonzero" transform="matrix(-3.34662 0 0 3.34662 1142.63 -473.214)"></use><path d="M400.121 176.416c0-25.872-12.477-46.876-27.845-46.876s-27.845 21.004-27.845 46.876v354.19c0 25.871 12.477 46.876 27.845 46.876s27.845-21.005 27.845-46.876z" style="fill:var(--brand)" transform="matrix(1.08507 0 0 .64455 96.053 -19.526)"></path><path d="M400.121 195.644c0-36.484-12.477-66.104-27.845-66.104s-27.845 29.62-27.845 66.104v315.734c0 36.484 12.477 66.104 27.845 66.104s27.845-29.62 27.845-66.104z" style="fill:var(--brand)" transform="matrix(.87132 0 0 .36703 263.223 78.582)"></path><use xlink:href="#b" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 384.847 150.818)"></use><use xlink:href="#b" style="fill:var(--brand)" transform="matrix(.7426 0 0 .16269 63.41 150.818)"></use><path d="M400.121 198.434c0-38.024-12.477-68.894-27.845-68.894s-27.845 30.87-27.845 68.894v310.154c0 38.023 12.477 68.894 27.845 68.894s27.845-30.871 27.845-68.894z" style="fill:var(--brand)" transform="matrix(.9081 0 0 .36703 67.663 78.582)"></path><path d="M138.901 766.819v5.833h-14.167v45.75h-6.833v-45.75h-14.167v-5.833zm9.167 51.583v-56.583l6.916-1.167v19.667q1.666-.667 3.75-1.042t4.084-.375q4.416 0 7.375 1.292 2.958 1.291 4.708 3.625t2.5 5.583.75 7.167v21.833h-6.833v-20.333q0-7.167-2-10.125-2.001-2.96-7.167-2.959a19 19 0 0 0-4.208.459q-2.043.458-2.959.875v32.083zm57.333-39.583q7.833 0 12.083 4.875t4.25 14.791v2.417h-27.666q.416 6 3.958 9.125c3.542 3.125 5.68 3.125 9.958 3.125q3.667 0 6.25-.583 2.583-.584 3.917-1.25l.917 5.833q-1.251.667-4.5 1.417t-7.334.75q-5 0-8.791-1.542t-6.292-4.208q-2.5-2.667-3.75-6.375t-1.25-8.042q0-5.168 1.583-9 1.584-3.834 4.167-6.333 2.584-2.5 5.833-3.75a18.4 18.4 0 0 1 6.667-1.25m9.333 16.5q0-4.917-2.583-7.792t-6.833-2.875q-2.418 0-4.375.917a11 11 0 0 0-3.375 2.416q-1.417 1.5-2.25 3.417a14.2 14.2 0 0 0-1.084 3.917zm58.334-14.5a72 72 0 0 1 7.458-1.417q3.708-.5 6.958-.5 7.75 0 11.709 4 3.957 4 3.958 12.833v22.667h-6.833v-21.417q0-3.75-.667-6.083-.668-2.334-1.875-3.625a6.4 6.4 0 0 0-2.917-1.792q-1.709-.5-3.708-.5-1.667 0-3.542.209-1.875.207-3.625.541v32.667h-6.916zm74.083 18.25q0 4.583-1.292 8.291-1.291 3.708-3.625 6.375a16.1 16.1 0 0 1-5.583 4.125q-3.25 1.458-7.083 1.459-3.75 0-6.959-1.459a16.2 16.2 0 0 1-5.541-4.125q-2.334-2.667-3.625-6.375-1.293-3.708-1.292-8.291t1.292-8.334 3.625-6.375a16.4 16.4 0 0 1 5.541-4.083q3.209-1.458 6.959-1.458 3.832 0 7.083 1.458a16.3 16.3 0 0 1 5.583 4.083q2.334 2.625 3.625 6.375 1.292 3.75 1.292 8.334m-7.083 0q0-6.584-2.834-10.375t-7.666-3.792q-4.75 0-7.542 3.792t-2.792 10.375q0 6.5 2.792 10.291t7.542 3.792q4.833 0 7.666-3.792t2.834-10.291m81.333 9.666q0-2.084-1.708-3.416-1.709-1.334-4.25-2.334a91 91 0 0 0-5.542-1.958q-3-.959-5.542-2.375-2.541-1.417-4.25-3.5-1.708-2.084-1.708-5.417 0-4.666 3.792-7.791t11.875-3.125q3.166 0 6.541.458t5.792 1.208l-1.25 6.167q-.668-.333-1.833-.708a23 23 0 0 0-2.667-.667q-1.5-.292-3.208-.458a34 34 0 0 0-3.292-.167q-9 0-9 4.917 0 1.749 1.708 2.958 1.709 1.208 4.292 2.208t5.583 2.042 5.584 2.542 4.291 3.625q1.709 2.124 1.709 5.375 0 5.25-4.084 8.125t-12.916 2.875q-4 0-7.334-.667a30 30 0 0 1-6.333-2l1.333-6.25a40 40 0 0 0 6.125 2.208q3.209.875 6.875.875 9.417 0 9.417-4.75m16.5-9.583q0-5.25 1.667-9.083 1.666-3.834 4.583-6.334 2.916-2.5 6.792-3.708t8.291-1.208q2.834 0 5.625.375t5.959 1.375l-1.584 5.916q-2.75-1-5.041-1.291a37 37 0 0 0-4.625-.292q-3 0-5.667.792-2.667.791-4.625 2.5-1.959 1.708-3.125 4.416-1.167 2.709-1.167 6.542 0 3.666 1.084 6.292 1.083 2.625 3.041 4.333 1.959 1.708 4.709 2.542t6.083.833a43 43 0 0 0 5.125-.292q2.458-.291 5.375-1.291l1 5.75a30 30 0 0 1-5.917 1.541q-3 .459-6.5.459-4.666 0-8.541-1.292-3.876-1.291-6.667-3.792t-4.333-6.291q-1.542-3.792-1.542-8.792m46.5 19.25v-36.583q8.5-2.917 17.167-2.917 2.666 0 5.083.208 2.417.209 5.333.875l-1.25 6.084q-2.667-.75-4.708-.959a44 44 0 0 0-4.458-.208q-5.084 0-10.334 1.417v32.083zm50.167-44.667q-2.168 0-3.75-1.5-1.584-1.5-1.584-4.083c0-2.583.528-3.083 1.584-4.083q1.582-1.5 3.75-1.5 2.25 0 3.791 1.5c1.541 1.5 1.542 2.361 1.542 4.083s-.514 3.083-1.542 4.083-2.291 1.5-3.791 1.5m-1.75 11.75h-11.167v-5.75h18v23.75q0 5.75 1.583 7.709 1.584 1.958 4.75 1.958 2.416 0 4.459-.583 2.041-.584 3.208-1.25l1 5.833q-.5.25-1.417.625a19 19 0 0 1-2.125.708q-1.208.333-2.666.584-1.46.25-3.042.25-3.667 0-6.083-1-2.418-1-3.875-3-1.459-2.001-2.042-4.959t-.583-6.875zm57.25 13.667q0-6.75-3.167-10.458-3.166-3.71-8.25-3.709-2.834 0-4.458.25-1.626.25-2.542.584v24.416q1.167 1.083 3.417 2t4.666.917q2.75 0 4.709-1.083a9.1 9.1 0 0 0 3.208-2.959q1.25-1.875 1.833-4.416.584-2.542.584-5.542m7.083 0q0 4.416-1.125 8.125t-3.25 6.375a14.9 14.9 0 0 1-5.208 4.167q-3.084 1.5-7 1.5-3.084 0-5.417-.75t-3.5-1.667v15.25h-6.917v-51.25q2.25-.667 5.792-1.333 3.541-.667 8.125-.667 4.166 0 7.583 1.417 3.417 1.416 5.834 4.041t3.75 6.375q1.332 3.75 1.333 8.417m23.583-19.417h16.334v5.75h-16.334v18q0 2.917.417 4.75t1.375 2.959c.958 1.126 1.458 1.263 2.458 1.541q1.5.417 3.667.417 3 0 4.833-.5a19 19 0 0 0 3.5-1.333l1 5.833q-1.167.5-3.708 1.333-2.542.834-6.292.834-4.334 0-7.083-1t-4.292-3-2.125-4.959-.583-6.875v-18h-8.167v-5.75h8.167v-10.833l6.833-1.167zm92.334 29q0-2.084-1.709-3.416-1.708-1.334-4.25-2.334a90 90 0 0 0-5.541-1.958q-3-.959-5.542-2.375-2.542-1.417-4.25-3.5t-1.708-5.417q0-4.666 3.791-7.791t11.875-3.125q3.167 0 6.542.458t5.792 1.208l-1.25 6.167q-.667-.333-1.834-.708a23 23 0 0 0-2.666-.667q-1.5-.292-3.209-.458a34 34 0 0 0-3.291-.167q-9 0-9 4.917 0 1.749 1.708 2.958 1.708 1.208 4.292 2.208t5.583 2.042q3 1.041 5.583 2.542t4.292 3.625q1.708 2.124 1.708 5.375 0 5.25-4.083 8.125t-12.917 2.875q-4 0-7.333-.667a30 30 0 0 1-6.333-2l1.333-6.25a40 40 0 0 0 6.125 2.208q3.208.875 6.875.875 9.417 0 9.417-4.75m18.333 9.667v-56.583l6.917-1.167v19.667q1.666-.667 3.75-1.042t4.083-.375q4.417 0 7.375 1.292 2.958 1.291 4.708 3.625t2.5 5.583.75 7.167v21.833h-6.833v-20.333q0-7.167-2-10.125-2-2.96-7.167-2.959-2.166 0-4.208.459-2.041.458-2.958.875v32.083zm74.083-19.333q0 4.583-1.291 8.291-1.293 3.708-3.625 6.375a16.1 16.1 0 0 1-5.584 4.125q-3.25 1.458-7.083 1.459-3.75 0-6.958-1.459a16.2 16.2 0 0 1-5.542-4.125q-2.334-2.667-3.625-6.375-1.292-3.708-1.292-8.291t1.292-8.334c1.292-3.75 2.069-4.625 3.625-6.375a16.4 16.4 0 0 1 5.542-4.083q3.208-1.458 6.958-1.458 3.833 0 7.083 1.458a16.3 16.3 0 0 1 5.584 4.083q2.332 2.625 3.625 6.375 1.291 3.75 1.291 8.334m-7.083 0q0-6.584-2.833-10.375t-7.667-3.792q-4.75 0-7.542 3.792t-2.791 10.375q0 6.5 2.791 10.291t7.542 3.792q4.833 0 7.667-3.792t2.833-10.291m39 19.333a137 137 0 0 1-2.167-5.167 319 319 0 0 1-1.791-4.666 188 188 0 0 1-1.75-4.875 481 481 0 0 0-2.042-5.792q-1.167 3.25-2.083 5.792a441 441 0 0 1-1.792 4.875 164 164 0 0 1-1.833 4.666 217 217 0 0 1-2.209 5.167h-5.166a288 288 0 0 1-3.875-20.292q-1.542-10.041-2.292-18.375h6.5q.25 3.25.542 6.375.291 3.125.708 6.542t.958 7.417 1.209 9a226 226 0 0 0 2.25-5.834 170 170 0 0 0 3.125-9.333q.708-2.334 1.541-5.25h5.167l1.5 5.25q.667 2.333 1.417 4.583l1.583 4.75a136 136 0 0 0 2.083 5.75q.75-4.583 1.334-8.5.582-3.916 1-7.375.416-3.457.75-6.708.333-3.25.583-6.667h6.25q-.417 4.167-1 8.917a229 229 0 0 1-1.417 9.75 371 371 0 0 1-1.833 10.125 322 322 0 0 1-2.083 9.875z" style="fill:var(--text);fill-rule:nonzero" transform="translate(-136.559 -536.567)scale(1.33572)"></path></svg></a>

<nav>
<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
<ul class="nav">
<li class="nav-item"><a href="/">Home</a></li>
<li class="nav-item"><a href="/chat/">Chat</a></li>
<li class="nav-item"><a href="/learn/">Learn</a></li>
<li class="nav-item"><a href="/build/">Build</a></li><li class="nav-item"><a href="#more-navigation">More...</a> </li>
</ul>					

</nav>
</header>
<main class="[ page-layout ] [ flow ]" id="skip">			
				

<h1 class="visually-hidden" id="embedding-youtube-videos-for-performance">Embedding YouTube videos for performance</h1>

<div class="[ popout ]">

<lite-youtube videoid="dt3XR_X22GY" style="background-image: url('https://i.ytimg.com/vi_webp/dt3XR_X22GY/maxresdefault.webp');">
  <a href="https://youtube.com/watch?v=dt3XR_X22GY" class="lyt-playbtn" title="Play Video">   
  </a>
</lite-youtube>


<div class="right-me">
<ul class="post-metadata">
	<li><time datetime="2024-03-06">06 March 2024</time></li>
	<li><a href="/tags/learn/" class="post-tag">learn</a></li>
</ul>
</div>
</div>
<article>
<heading-anchors>
	<div class="flow">
<p>Hello. This is following up to <a href="/5">episode 5</a> of the main chat where Nathan and I were talking about component based web design.</p>
<p>In that we touched on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components">web components</a> which in simple terms are “web standards” alternatives to 3rd party component libraries like React and Vue.js. The big plus is they will last as long as the web.</p>
<p>We've been experimenting with two web components for the media embeds on the show's constantly developing website:</p>
<ul>
<li>A Shadow Dom component for our audio chat player by Dave Rupert (which I'll cover in the next video) and what we are covering today..</li>
<li>A &quot;Light Dom&quot; component called <a href="https://github.com/paulirish/lite-youtube-embed/">Lite YouTube Embed</a> by Paul Irish which allows us to embed YouTube videos without forcing the visitors to download all of YouTube associated files regardless of whether the video is actually played.</li>
</ul>
<h2 id="lite-youtube-embed">Lite Youtube Embed</h2>
<p>What Lite YouTube Embed does is only downloads a YouTube thumbnail image of the video and places a SVG play button over it so it visibly looks the same as a regular embed.</p>
<p>This saves well over a megabyte on the initial page load (which is, in our case, more than 10 times the size of the page we are adding it to) Of course, when the user clicks on play the embed acts as normal, but I'm sure a decent percentage of people visiting our page will have already seen the video and are here for the additional text resources. According to <a href="https://medium.com/illumination/mr-beast-explains-why-you-shouldnt-put-outbound-links-into-posts-on-social-media-platforms-1b8bcf9ce198">Mr. Beast we should be avoiding external links in YouTube.</a></p>
<p>I'm surprised Google's YouTube embed does not do this by default, particularly since the default way of embedding almost certainly makes you fail their own <a href="https://pagespeed.web.dev/analysis/https-noscript-show-0/t1ya9i5v2y?form_factor=mobile">Core Web Vitals on page load.</a></p>
<p>If they downloaded files based on the user's actions, as this component does, I'm sure it would greatly benefit the environment (not to mention those users who pay proportionately more for their data particularly outside of the west).</p>
<p>But on the positive side, Paul Irish the author of this alternative is a Google employee who works on performance, Chrome DevTools, Lighthouse, and PageSpeed Insights.</p>
<p>Also for the last 8 years I have been using a <a href="https://www.labnol.org/internet/light-youtube-embeds/27941/">similar technique</a> by another Google developer Amit Agarwal (who seems to update his post on this according to the date shown).</p>
<p>The previous solution seemed to work perfectly, but I thought I would try Paul's as it is often recommended and is on Github where I can see if others have found issues I may have not tested for.</p>
<p>From my quite shallow understanding the main difference is that Paul Irish's solution is a web component in the sense that the Javascript used is registered to this custom element we put in our html.</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lite-youtube</span><span class="token punctuation">></span></span> content goes here <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lite-youtube</span><span class="token punctuation">></span></span>  </code></pre>
<p>This is not a Shadow Dom component where the CSS is encapsulated in the Javascript (although there is a link to a <a href="https://github.com/justinribeiro/lite-youtube">forked Shadow Dom version</a>).</p>
<p>I've called it “Light DOM” as that is the favoured buzzword of the day but I think we could just call it HTML.</p>
<p>The instructions and examples on Github are straightforward and useful, but I did deviate a bit from them to push performance as much as possible. Certainly I would appreciate anyone letting me know if I have got it wrong.</p>
<p><img src="/img/Lite-you-tube-embed-page-speed.webp" alt="Screenshot of  a Page Speed Insights test showing a 100 score."></p>
<h2 id="the-css">The CSS</h2>
<hr>
<p>Firstly, I grabbed Paul's CSS which I put into my only style-sheet so it's cached ready for each page that might need it. Given CSS renders quickly and we have little of it on this site that makes the most sense to me.</p>
<p>As a side point, these days (and following some Google recommendations) I will separate large chunks of CSS that may just be used on a few rarely visited pages and add them to that page internally or inline. Something that back in the day would have been frowned upon, but now we have to balance what we load and against having one source of truth for our code.</p>
<p>I slightly slimmed and modernised the CSS For example we have now have aspect-ratio so don't need old CSS tricks hack to achieve this and change anything I saw that was not a logical property I may change this further but here is mine:</p>
<pre class="language-css" tabindex="0"><code class="language-css">   <span class="token comment">/* Youtube */</span>

<span class="token selector">lite-youtube</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">contain</span><span class="token punctuation">:</span> content<span class="token punctuation">;</span>
  <span class="token property">background-position</span><span class="token punctuation">:</span> center center<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token comment">/* gradient */</span>
<span class="token selector">lite-youtube::before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">attr</span><span class="token punctuation">(</span>data-title<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">inset-block-start</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>180deg<span class="token punctuation">,</span>
   <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0.67<span class="token punctuation">)</span> 0%<span class="token punctuation">,</span>
   <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0.54<span class="token punctuation">)</span> 14%<span class="token punctuation">,</span>
   <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span> 54%<span class="token punctuation">,</span>
   <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0.051<span class="token punctuation">)</span> 72%<span class="token punctuation">,</span>
   <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> 94%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 99px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
  <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* responsive iframe with a 16:9 aspect ratio
  thanks https://css-tricks.com/responsive-iframes/
*/</span>
<span class="token selector">lite-youtube::after</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
 <span class="token comment">/* padding-bottom: calc(100% / (16 / 9)); */</span>
 <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> 16 / 9 <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">lite-youtube > iframe</span> <span class="token punctuation">{</span>
<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  
<span class="token property">inset-block-start</span><span class="token punctuation">:</span>0 <span class="token punctuation">;</span>
<span class="token property">inset-inline-start</span><span class="token punctuation">:</span>0 <span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* play button */</span>
<span class="token selector">lite-youtube > .lty-playbtn</span> <span class="token punctuation">{</span>
<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token comment">/* …but visually it's still the same size */</span>
  <span class="token property">background</span><span class="token punctuation">:</span> no-repeat center/68px 48px<span class="token punctuation">;</span>
  <span class="token comment">/* YT's actual play button svg */</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> url
  <span class="token punctuation">(</span>'<span class="token property">data</span><span class="token punctuation">:</span>image/svg+xml<span class="token punctuation">;</span>utf8<span class="token punctuation">,</span>&lt;svg xmlns=<span class="token string">"http://www.w3.org/2000/svg"</span>
   viewBox=<span class="token string">"0 0 68 48"</span>>&lt;
   path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13
 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63
  3.26-5.42 6.19C.06 13.05 0
24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 
5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13
27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 
34.95 68 24 68 24s-.06-10.95-1.48-16.26z" 
fill=<span class="token string">"red"</span>/>&lt;   
path d=<span class="token string">"M45 24 27 14v20"</span>
 fill=<span class="token string">"white"</span>/>&lt;/svg>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>25%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> filter .1s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">lite-youtube:hover > .lty-playbtn,
lite-youtube .lty-playbtn:focus</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* Post-click styles */</span>
<span class="token selector">lite-youtube.lyt-activated</span> <span class="token punctuation">{</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">lite-youtube.lyt-activated::before,
lite-youtube.lyt-activated > .lty-playbtn</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.lyt-visually-hidden</span> <span class="token punctuation">{</span>
  <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="the-javascript">The Javascript</h2>
<p>I downloaded the Github Javascript file to my sites folder and linked to the pages it was needed on.</p>
<p>This file is well commented, but just to shave off a bit more for visitors I removed these and <a href="https://www.toptal.com/developers/javascript-minifier">minified the Javascript.</a> It compresses 1.7kb</p>
<h2 id="the-html">The HTML</h2>
<hr>
<p>With a space of over 700px for the video I need a slightly larger thumbnail than the default 480px which is what you would get if you did not specify an inline background image. The next size up was 640px which might look a bit poor on retina display.</p>
<p>1280px seemed a bit large but I accidentally discovered that YouTube serves a webp version and that saving made me go with that.</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lite-youtube</span> <span class="token attr-name">videoid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>xx<span class="token punctuation">"</span></span>
<span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'https://i.ytimg.com/vi_webp/xx/maxresdefault.webp'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lite-youtube</span><span class="token punctuation">></span></span></code></pre>
<p>This also stops Google's PageSpeed Insights from nagging me to “serve images in a next-gen format”. There is still a nag about “Serving static assets with an efficient cache policy” but I don't think there's anything I can do about that as it is on Google's servers.</p>
<p>You can see the issues if you run a <a href="https://pagespeed.web.dev/analysis/https-paulirish-github-io-lite-youtube-embed-variants-pe-html/i897dycxhw?form_factor=mobile">Pagespeed insights test on on the Lite Youtube Embed's demo page</a></p>
<p>The other thing PageSpeed Insights flagged up (under the SEO section) was that the link to YouTube was not crawlable so I formatted that differently. The main concern with this solution is many claimed this makes the video....</p>
<h2 id="not-indexable-by-google"><a href="https://github.com/paulirish/lite-youtube-embed/issues/105">Not Indexable by Google</a></h2>
<p>This is issue is now solved with iframe in a <noscript> tag within the Javascript.</noscript></p>
<p>Dave Smart's another suggestion was to add schema with this <a href="https://classyschema.org/Video?example=single">handy tool.</a></p>
<p>All you have to do is add your Youtube video and it generates the JSON script which I add just before the pages closing  tag. Incidentally, I put SEO stuff last in the head following a talk by performance expert Harry Robert called <a href="https://www.youtube.com/watch?v=UW1PEMBdX5E">&quot;Get your head straight&quot;.</a></p>
<p>I am not sure how important schema or rich snippets are these days. Some SEO's have started saying that with advances in machine learning technology i.e. Natural language processing (NLP) search engines are relying on them less.</p>
<p>I've added them just because it is so quick to do so, which was not the case when I was using WordPress, but it's &quot;swings and roundabouts&quot;: as WordPress plugins did automate other SEO meta data that I now have to do manually. I will talk about this another time.</p>
<h2 id="preloading-the-youtube-thumbnail">Preloading the YouTube thumbnail</h2>
<hr>
<p>One last thing before I go, is that I preloaded the Youtube thumbnail. As it was there at hand it seemed a quick copy and paste job that seemed to keep the PageSpeed Insights score more often at 100.</p>

</div></heading-anchors></article>


<div class="popout">

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/5/">What is component based web design?</a></li><li class="links-nextprev-next">Next →<br><a href="/6/">What&#39;s the big deal with container queries?</a></li>
</ul>
</div>
			
</main>	
  <footer>

<h2 class="[ angle ]" id="stuff">Stuff</h2>  

<div class="[ footer-wrapper ]">

<nav class="[ footer-links ][ fa1 ]">
<h3 id="audio-episodes">Audio episodes</h3>

<ul> 
<li><a href="https://podcast.apple.com/us/podcast/no-script-show/id1721164461">Apple Podcast</a></li>  
<li><a href="https://open.spotify.com/show/3Ki7eEhpGheFpmJOzZ0WEi">Spotify</a></li> 
<li><a href="https://castbox.fm/channel/id5744674?utm_campaign=ex_share_ch&utm_medium=exlink&country=us">Castbox.fm</a></li>
<li><a href="https://www.podcastrepublic.net/podcast/1721164461">Podcast Republic</a></li>
<li><a href="https://feeds.hubhopper.com/9698ac00a8141974e116d9298f9f87c8.rss">Podcast Feed</a></li>   
</ul>
</nav>

<nav class="[ footer-links ][ fa2 ]" id="more-navigation" aria-label="More on this site">
<h3 id="useful-links">Useful links</h3>
<ul role="list">
<li><a href="/about">About</a></li>
<li><a href="/contact">Contact</a></li>        
<li><a href="/blog">Archive</a></li>
<li><a href="/feed/feed.xml">RSS Feed</a></li>
<li><a href="/resources">Resources</a></li>
</ul>
</nav>
</div>

<div class="[ fa3 ]">
<small>© Copyright since 2023 | <a href="/privacy">Privacy</a> | <em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em>
</small>

 </div>
</footer>

		<!-- This page `/learn/6/` was built on 2025-05-10T06:35:37.481Z -->
		<script type="module" src="/dist/2it2F9Kmpn.js"></script>		
</body>
</html>